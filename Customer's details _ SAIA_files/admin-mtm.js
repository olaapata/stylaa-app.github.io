!function(e){function t(t){for(var o,s,i=t[0],l=t[1],d=t[2],m=0,u=[];m<i.length;m++)s=i[m],r[s]&&u.push(r[s][0]),r[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);u.length;)u.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var o={},r={0:0},n=[];function s(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=o,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(a,o,function(t){return e[t]}.bind(null,o));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var c=l;n.push([553,1]),a()}({283:function(e,t,a){},318:function(e,t){$(document).ready(function(){var e=$("#plan-modal"),t=$(".preloader"),a=null,o=null;function r(t,a){e.find(".modal-title").text(t),e.find(".modal-body").text(a),e.modal("show")}function n(){var e="/billing/subscriptions/create/",t="post";return subscriptionId&&"null"!==subscriptionId&&(e="/billing/subscriptions/"+subscriptionId+"/update/",t="post"),new Promise(function(r,n){$.ajax({url:e,method:t,data:{plan:a},dataType:"json"}).done(function(e){o=e.success_url,r(e)}).fail(function(e){n(e)})})}e.on("hidden.bs.modal",function(){o?window.location=o:window.location.reload()}),$("#change-plan-modal-yes").on("click",function(){$("#change-plan-modal").modal("hide"),t.addClass("preloader-show");$(this);setTimeout(function(){n().then(function(e){r("Success","Your plan has been successfuly changed")}).catch(function(e){console.log(e),r("Error",e.responseJSON.message)})},700)}),$('[name="period"]').on("change",function(){$(".upgrade-plan__plan-price").removeClass("active"),$('[data-period="'+$(this).val()+'"]').addClass("active"),$(".upgrade-plan__btns").removeClass("active"),$(".upgrade-plan__btns--"+$(this).val()).addClass("active")}),$('[name="period2"]').on("change",function(){$('[name="period"]').filter('[value="'+$(this).val()+'"]').prop("checked",!0).change()}),$(".upgrade-plan__btn--try, .upgrade-plan-mtm__btn--try").on("click",function(){var e=$('[name="period"]:checked').val(),o=$(this).closest(".upgrade-plan__plan-item"),s=$("#change-plan-modal");a=o.data("plan-"+e),console.log(e,a),$(this).hasClass("js-downgrade")&&(s.find(".modal-title").text("Are you sure you want to downgrade your plan?"),"mtm"===chosenProduct?s.find(".modal-body").text("Professional plan includes more measured customers per month and more features."):s.find(".modal-body").text("Growing plan includes more measured customers per month and more features."),s.find("#change-plan-modal-yes").text("Downgrade")),subscriptionId?s.modal("show"):(t.addClass("preloader-show"),n().then(function(a){"monthly"===e?ga("send",{hitType:"event",eventCategory:"basic_plan",eventAction:"select",eventLabel:"month"}):"annual"===e&&ga("send",{hitType:"event",eventCategory:"basic_plan",eventAction:"select",eventLabel:"year"}),t.removeClass("preloader-show"),r("Success","Your plan has been successfuly changed")}).catch(function(e){console.log(e),t.removeClass("preloader-show"),r("Error",e.responseJSON.message)}))}),$(".upgrade-plan__btn--unsubscribe, .upgrade-plan-mtm__btn--unsubscribe").on("click",function(){var e=$(this);t.addClass("preloader-show"),$("#unsubscribe-modal-promt").modal("hide"),$.ajax({url:"/billing/subscriptions/"+subscriptionId+"/delete/",method:"post",data:{plan:a},dataType:"json"}).done(function(a){o=a.success_url,t.removeClass("preloader-show"),ga("send",{hitType:"event",eventCategory:"basic_plan",eventAction:"unsubscribe"}),e.closest(".modal").hasClass("mtm")?r("Sorry to see you go!","You have been unsubscribed"):r("Success","You have been successfuly unsubscribed")}).fail(function(e){t.removeClass("preloader-show"),r("Error",e.responseJSON.message)})}),$(".upgrade-plan__btn--contact-us, .upgrade-plan-mtm__btn--contact-us").on("click",function(e){t.addClass("preloader-show");var a=$(this);$.ajax({url:"/billing/send-contact-email/",method:"post",dataType:"json"}).done(function(e){o=e.success_url,t.removeClass("preloader-show"),ga("send",{hitType:"event",eventCategory:"enterprise_plan",eventAction:"select"}),"downgrade_flag"===a.data("hubspot")?r("We\u2019ll get back to you shortly",""):a.hasClass("mtm")?r("We\u2019ll get back to you shortly.",""):r("","We\u2019ll get back to you shortly.")}).fail(function(e){t.removeClass("preloader-show"),r("Error",e.responseJSON.message)})}),$(".upgrade-plan__btn--modal, .upgrade-plan-mtm__btn--modal").on("click",function(){localStorage.setItem("showModalIfNotOnThisPage",$(this).attr("href"))});var s=document.getElementById("annual"),i=document.getElementById("monthly"),l=$(".js-pricing-item-starter"),d=$(".js-pricing-item-basic"),c=$(".js-pricing-item-growing"),m=$(".js-pricing-item-professional"),u=$(".js-pricing-item-enterprise"),h=$(".js-pricing-monthly-starter"),p=$(".js-pricing-monthly-basic"),f=$(".js-pricing-monthly-growing"),v=$(".js-pricing-monthly-professional"),g=$(".js-pricing-monthly-enterprise"),_=$("#annual").attr("checked")?"annual":"monthly";function b(e){$(".upgrade-plan__btns").removeClass("active"),$(".upgrade-plan__btns--"+e).addClass("active"),l.length&&l.text(pricing.starter.item[e]),h.length&&h.text(pricing.starter.monthly[e]),d.length&&d.text(pricing.basic.item[e]),p.length&&p.text(pricing.basic.monthly[e]),c.length&&c.text(pricing.growing.item[e]),f.length&&f.text(pricing.growing.monthly[e]),m.length&&m.text(pricing.professional.item[e]),v.length&&v.text(pricing.professional.monthly[e]),u.length&&u.text(pricing.enterprise.item[e]),g.length&&g.text(pricing.enterprise.monthly[e]),"monthly"===e?$(".js-period").text(" monthly"):"annual"===e?$(".js-period").text(" annually"):$(".js-period").text(" monthly")}b(_),console.log({currentPlan:_}),$(".upgrade-plan__switcher-button").on("click",function(){var e=$(".upgrade-plan__switcher-button").find(".upgrade-plan__switcher-button-circle"),t=_;e.hasClass("left")?(e.removeClass("left"),e.addClass("right"),$(".upgrade-plan__switcher-text-right").addClass("bold"),t="annual",i.checked=!1,s.checked=!0):(e.removeClass("right"),e.addClass("left"),$(".upgrade-plan__switcher-text-left").addClass("bold"),t="monthly",i.checked=!0,s.checked=!1),b(t)})})},348:function(e,t,a){var o={"./af":118,"./af.js":118,"./ar":119,"./ar-dz":120,"./ar-dz.js":120,"./ar-kw":121,"./ar-kw.js":121,"./ar-ly":122,"./ar-ly.js":122,"./ar-ma":123,"./ar-ma.js":123,"./ar-sa":124,"./ar-sa.js":124,"./ar-tn":125,"./ar-tn.js":125,"./ar.js":119,"./az":126,"./az.js":126,"./be":127,"./be.js":127,"./bg":128,"./bg.js":128,"./bm":129,"./bm.js":129,"./bn":130,"./bn.js":130,"./bo":131,"./bo.js":131,"./br":132,"./br.js":132,"./bs":133,"./bs.js":133,"./ca":134,"./ca.js":134,"./cs":135,"./cs.js":135,"./cv":136,"./cv.js":136,"./cy":137,"./cy.js":137,"./da":138,"./da.js":138,"./de":139,"./de-at":140,"./de-at.js":140,"./de-ch":141,"./de-ch.js":141,"./de.js":139,"./dv":142,"./dv.js":142,"./el":143,"./el.js":143,"./en-SG":144,"./en-SG.js":144,"./en-au":145,"./en-au.js":145,"./en-ca":146,"./en-ca.js":146,"./en-gb":147,"./en-gb.js":147,"./en-ie":148,"./en-ie.js":148,"./en-il":149,"./en-il.js":149,"./en-nz":150,"./en-nz.js":150,"./eo":151,"./eo.js":151,"./es":152,"./es-do":153,"./es-do.js":153,"./es-us":154,"./es-us.js":154,"./es.js":152,"./et":155,"./et.js":155,"./eu":156,"./eu.js":156,"./fa":157,"./fa.js":157,"./fi":158,"./fi.js":158,"./fo":159,"./fo.js":159,"./fr":160,"./fr-ca":161,"./fr-ca.js":161,"./fr-ch":162,"./fr-ch.js":162,"./fr.js":160,"./fy":163,"./fy.js":163,"./ga":164,"./ga.js":164,"./gd":165,"./gd.js":165,"./gl":166,"./gl.js":166,"./gom-latn":167,"./gom-latn.js":167,"./gu":168,"./gu.js":168,"./he":169,"./he.js":169,"./hi":170,"./hi.js":170,"./hr":171,"./hr.js":171,"./hu":172,"./hu.js":172,"./hy-am":173,"./hy-am.js":173,"./id":174,"./id.js":174,"./is":175,"./is.js":175,"./it":176,"./it-ch":177,"./it-ch.js":177,"./it.js":176,"./ja":178,"./ja.js":178,"./jv":179,"./jv.js":179,"./ka":180,"./ka.js":180,"./kk":181,"./kk.js":181,"./km":182,"./km.js":182,"./kn":183,"./kn.js":183,"./ko":184,"./ko.js":184,"./ku":185,"./ku.js":185,"./ky":186,"./ky.js":186,"./lb":187,"./lb.js":187,"./lo":188,"./lo.js":188,"./lt":189,"./lt.js":189,"./lv":190,"./lv.js":190,"./me":191,"./me.js":191,"./mi":192,"./mi.js":192,"./mk":193,"./mk.js":193,"./ml":194,"./ml.js":194,"./mn":195,"./mn.js":195,"./mr":196,"./mr.js":196,"./ms":197,"./ms-my":198,"./ms-my.js":198,"./ms.js":197,"./mt":199,"./mt.js":199,"./my":200,"./my.js":200,"./nb":201,"./nb.js":201,"./ne":202,"./ne.js":202,"./nl":203,"./nl-be":204,"./nl-be.js":204,"./nl.js":203,"./nn":205,"./nn.js":205,"./pa-in":206,"./pa-in.js":206,"./pl":207,"./pl.js":207,"./pt":208,"./pt-br":209,"./pt-br.js":209,"./pt.js":208,"./ro":210,"./ro.js":210,"./ru":211,"./ru.js":211,"./sd":212,"./sd.js":212,"./se":213,"./se.js":213,"./si":214,"./si.js":214,"./sk":215,"./sk.js":215,"./sl":216,"./sl.js":216,"./sq":217,"./sq.js":217,"./sr":218,"./sr-cyrl":219,"./sr-cyrl.js":219,"./sr.js":218,"./ss":220,"./ss.js":220,"./sv":221,"./sv.js":221,"./sw":222,"./sw.js":222,"./ta":223,"./ta.js":223,"./te":224,"./te.js":224,"./tet":225,"./tet.js":225,"./tg":226,"./tg.js":226,"./th":227,"./th.js":227,"./tl-ph":228,"./tl-ph.js":228,"./tlh":229,"./tlh.js":229,"./tr":230,"./tr.js":230,"./tzl":231,"./tzl.js":231,"./tzm":232,"./tzm-latn":233,"./tzm-latn.js":233,"./tzm.js":232,"./ug-cn":234,"./ug-cn.js":234,"./uk":235,"./uk.js":235,"./ur":236,"./ur.js":236,"./uz":237,"./uz-latn":238,"./uz-latn.js":238,"./uz.js":237,"./vi":239,"./vi.js":239,"./x-pseudo":240,"./x-pseudo.js":240,"./yo":241,"./yo.js":241,"./zh-cn":242,"./zh-cn.js":242,"./zh-hk":243,"./zh-hk.js":243,"./zh-tw":244,"./zh-tw.js":244};function r(e){var t=n(e);return a(t)}function n(e){var t=o[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=348},553:function(e,t,a){"use strict";a.r(t);a(37),a(286),a(299),a(300);var o=a(26);function r(e){var t=.3937*e/12,a=Math.floor(t),o=Math.round(12*(t-a));return 12===o&&(a+=1,o=0),{ft:a,in:o}}function n(e,t){return function(e){return 2.54*e}(function(e){return 12*e}(e||0)+parseInt(t||0))}function s(e){return(2.2*e).toFixed(0)}function i(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var a=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),a&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(a))}$(document).ready(function(){$(document).on("click","#getImport",function(e){e.preventDefault();var t=$(this).attr("data-brand"),a=$(this).attr("data-level"),o=$(this).attr("data-gender");$("#dynamic-content").hide(),$("#import-result").hide(),$("#modal-loader").show(),$("#dynamic-content").show(),$("#id_body_part").val(a),$("#id_brand").val(t),$("#id_gender").val(o),$("#modal-loader").hide()})}),$(document).ready(function(){var e=$("#sizechart-body-type-select"),t=$("#sizeshart-import-form");e.on("click",".btn-primary",function(a){a.preventDefault();var o=$(this).data("type");t.find("#id_body_part").val(o),e.hide(),t.show()}),$(".collapse-link").on("click",function(){var e=$(this).closest("div.ibox"),t=$(this).find("i");e.children(".ibox-content").slideToggle(200),t.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("border-bottom"),setTimeout(function(){e.resize(),e.find("[id^=map-]").resize()},50)}),$(".close-link").on("click",function(){$(this).closest("div.ibox").remove()}),$(".fullscreen-link").on("click",function(){var e=$(this).closest("div.ibox"),t=$(this).find("i");$("body").toggleClass("fullscreen-ibox-mode"),t.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}),$(".close-canvas-menu").on("click",function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},200)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},100)):$("#side-menu").removeAttr("style")}),$(".right-sidebar-toggle").on("click",function(){$("#right-sidebar").toggleClass("sidebar-open")}),$(".open-small-chat").on("click",function(){$(this).children().toggleClass("fa-comments").toggleClass("fa-remove"),$(".small-chat-box").toggleClass("active")}),$(".check-link").on("click",function(){var e=$(this).find("i"),t=$(this).next("span");return e.toggleClass("fa-check-square").toggleClass("fa-square-o"),t.toggleClass("todo-completed"),!1}),$.fn.popover&&$("[data-toggle=popover]").popover()}),$(document).ready(function(){if("localStorage"in window&&null!==window.localStorage){var e=localStorage.getItem("collapse_menu"),t=localStorage.getItem("fixedsidebar"),a=localStorage.getItem("fixednavbar"),o=localStorage.getItem("boxedlayout"),r=localStorage.getItem("fixedfooter"),n=$("body");"on"==t&&(n.addClass("fixed-sidebar"),$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})),"on"==e&&(n.hasClass("fixed-sidebar"),n.hasClass("body-small")||n.addClass("mini-navbar")),"on"==a&&($(".navbar-static-top").removeClass("navbar-static-top").addClass("navbar-fixed-top"),n.addClass("fixed-nav")),"on"==o&&n.addClass("boxed-layout"),"on"==r&&$(".footer").addClass("fixed")}}),function(e){e.fn.offsetRelative||(e.fn.offsetRelative=function(e){var t=this.parent();e&&(t=t.closest(e));var a=this.offset(),o=t.offset();return{left:a.left-o.left,top:a.top-o.top}})}(jQuery),$(document).ready(function(){$(document).on("click","#submit_brand_create",function(){$("#brand_create_form").find('[type="submit"]').trigger("click")}),$(document).on("click","#submit_brand_update",function(){$("#brand_update_form").find('[type="submit"]').trigger("click")}),$(document).on("click","#submit_brand_import",function(){$("#sizeshart-import-form").find('[type="submit"]').trigger("click")}),$(document).on("click","#submit_brand_delete",function(){$("#delete_brand_form").find('[type="submit"]').trigger("click")}),$(document).on("click","#delete-size-chart",function(){$("#delete-size-chart-form").find('[type="submit"]').trigger("click")});var e=$("#api-key").find("input");$("#api-key button").on("click",function(){"password"===e.attr("type")?(e.attr("type","text"),$(this).text("Hide API key")):(e.attr("type","password"),$(this).text("Show API key"))}),$("#logout-model-btn").on("click",function(){$("#logout-modal form").submit()}),$('.sidebar__nav-list a[href="#"]').on("click",function(e){e.preventDefault(),$(this).siblings("ul").addClass("collapse"),$(this).siblings("ul").toggleClass("in")}),$("[data-content]").on("click",function(){if(!$(this).attr("data-disabled")){var e=$(this).data("content");$("[data-content]").removeClass("active"),$(this).addClass("active"),$("[data-tab]").removeClass("active"),$('[data-tab="'+e+'"]').addClass("active")}})}),window.showFormMessage=function(e){$(".form-message__message").text(e),$(".form-message").addClass("active")},window.hideFormMessage=function(e){e.removeClass("active")},$(".form-message__btn").on("click",function(){$(this).closest(".form-message").removeClass("active")}),$(".mobile-bar__btn, .sidebar__drop").on("click",function(){$(".sidebar").toggleClass("active"),$(".mobile-bar__btn").toggleClass("active")});var l=function(e){var t=function(){var e,t=navigator.userAgent,a=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===a[1]?(e=t.match(/\bOPR|Edge\/(\d+)/),{name:a[1],version:a[2]}):(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&a.splice(1,1,e[1]),{name:a[0],version:a[1]})}();return"Chrome"===t.name&&+t.version>=81?Promise.resolve(0):new Promise(function(t,a){var o=new FileReader;o.addEventListener("load",function(){var e=new DataView(o.result);if(65496!==e.getUint16(0,!1))return t(-2);for(var a=e.byteLength,r=2;r<a;){var n=e.getUint16(r,!1);if(r+=2,65505===n){if(r+=2,1165519206!==e.getUint32(r,!1))return t(-1);var s=18761===e.getUint16(r+=6,!1);r+=e.getUint32(r+4,s);var i=e.getUint16(r,s);r+=2;for(var l=0;l<i;l+=1)if(274===e.getUint16(r+12*l,s))return t(e.getUint16(r+12*l+8,s))}else{if(65280!==(65280&n))return t(-1);r+=e.getUint16(r,!1)}}return t(-1)}),o.addEventListener("error",function(e){return a(e)}),o.readAsArrayBuffer(e)})},d=function(e,t){return new Promise(function(a,o){var r=new FileReader;r.addEventListener("load",function(){if(!t||t<=1)return a(r.result);var e=new Image;return e.addEventListener("load",function(){var o=document.createElement("canvas"),r=o.getContext("2d"),n=e.width,s=e.height;switch(o.width=n,o.height=s,t){case 2:r.translate(n,0),r.scale(-1,1);break;case 3:r.translate(n,s),r.rotate(1*Math.PI);break;case 4:r.translate(0,s),r.scale(1,-1);break;case 5:o.width=s,o.height=n,r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:o.width=s,o.height=n,r.rotate(.5*Math.PI),r.translate(0,-s);break;case 7:o.width=s,o.height=n,r.rotate(1.5*Math.PI),r.translate(-n,s),r.scale(1,-1);break;case 8:o.width=s,o.height=n,r.translate(0,n),r.rotate(1.5*Math.PI)}r.drawImage(e,0,0,n,s),a(o.toDataURL("image/jpeg",.95))}),e.src=r.result,null}),r.addEventListener("error",function(e){o(e)}),r.readAsDataURL(e)})};$(window).on("load",function(){var e=$(".user-page__request-progress");if(e.length){var t=e.data("request-is"),a=e.data("request-from");e.css("width",100*t/a+"%")}}),$(document).ready(function(){var e=null;"/user/"!==window.location.pathname&&"/profile/"!==window.location.pathname||$("body").addClass("profile-page"),$('[data-toggle="tooltip"]').tooltip({container:"body"}),$("#copy-to-clipboard").on("click",function(){var e=$(this);!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var a=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),a&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(a))}(API_KEY),$("#user-key").focus().select(),e.addClass("mtm-widget__copy-btn--copied"),setTimeout(function(){e.removeClass("mtm-widget__copy-btn--copied")},3e3)}),$(".user-page__show-pwd").on("click",function(){var e=$(this).siblings("input"),t=e.attr("type"),a=t;$(this).removeClass("user-page__show-pwd--show"),$(this).removeClass("user-page__show-pwd--hide"),"password"===t?(a="text",$(this).addClass("user-page__show-pwd--show")):(a="password",$(this).addClass("user-page__show-pwd--hide"));var o=e.clone().attr("type",a);e.replaceWith(o)}),$("#change-password").on("change",'[name="password1"]',function(){$('[name="password2"]').val($(this).val())}),$("#change-password-btn").on("click",function(){var e=$("#form-change-password").serialize();if($("#confirm-password").removeClass("input--error"),$(".confirm-password-error").hide(),$("#password1").val()!==$("#confirm-password").val())return $("#confirm-password").addClass("input--error"),void $(".confirm-password-error").show();$.ajax({url:"/accounts/password/change/",method:"POST",data:e,json:!0,success:function(e){$("#password1 + .form__field-error").text(""),$("#password1 + .form__field-error").hide(),$('[name="password1"]').removeClass("input--error"),$("#oldpassword + .form__field-error").text(""),$("#oldpassword + .form__field-error").hide(),$('[name="oldpassword"]').removeClass("input--error"),$("#confirm-password").removeClass("input--error"),$(".confirm-password-error").hide(),$('[name="password1"]').val(""),$('[name="password2"]').val(""),$('[name="oldpassword"]').val(""),$("#confirm-password").val(""),$("#change-password").modal("hide"),o.success("Password has been successfuly changed","Success!",{positionClass:"toast-top-center"})},error:function(e){var t=e.responseJSON.form.fields.password1,a=e.responseJSON.form.fields.oldpassword;if(t.errors&&t.errors.length){o=t.errors.join("\n");$("#password1 + .form__field-error").text(o),$("#password1 + .form__field-error").show(),$('[name="password1"]').addClass("input--error"),console.log(o)}else $("#password1 + .form__field-error").text(""),$("#password1 + .form__field-error").hide(),$('[name="password1"]').removeClass("input--error");if(a.errors&&a.errors.length){var o=a.errors.join("\n");$("#oldpassword + .form__field-error").text(o),$("#oldpassword + .form__field-error").show(),$('[name="oldpassword"]').addClass("input--error"),console.log(o)}else $("#oldpassword + .form__field-error").text(""),$("#oldpassword + .form__field-error").hide(),$('[name="oldpassword"]').removeClass("input--error")}})}),$("#save-user-info-form").on("submit",function(e){return e.preventDefault(),!1}),$("#save-user-info").on("click",function(e){e.preventDefault();$("#save-user-info-form");var t=!1,o=!1,r=!1;""===$('[name="first_name"]').val().trim()?($('[name="first_name"] + .user-page__field-error').text("This field is required"),$('[name="first_name"] + .user-page__field-error').show(),$('[name="first_name"]').addClass("input--error"),t=!1):($('[name="first_name"] + .user-page__field-error').text(""),$('[name="first_name"] + .user-page__field-error').hide(),$('[name="first_name"]').removeClass("input--error"),t=!0),""===$('[name="last_name"]').val().trim()?($('[name="last_name"] + .user-page__field-error').text("This field is required"),$('[name="last_name"] + .user-page__field-error').show(),$('[name="last_name"]').addClass("input--error"),o=!1):($('[name="last_name"] + .user-page__field-error').text(""),$('[name="last_name"] + .user-page__field-error').hide(),$('[name="last_name"]').removeClass("input--error"),o=!0),$('[name="email"]').val()?($('[name="email"] + .user-page__field-error').text(""),$('[name="email"] + .user-page__field-error').hide(),$('[name="email"]').removeClass("input--error"),r=!0):($('[name="email"] + .user-page__field-error').text("This field is required"),$('[name="email"] + .user-page__field-error').show(),$('[name="email"]').addClass("input--error"),r=!1),t&&o&&r&&($('.input[type="email"]').val()===$('.input[type="email"]').attr("value")?($("#save-user-info").addClass("button--processing"),a()):($("#save-user-info").addClass("button--processing"),$.ajax({url:"/api/v2/users/check-unique-email/",method:"POST",data:{email:$('.input[type="email"]').val()},json:!0,success:function(e){$("#save-user-info").removeClass("button--processing"),$("#confirm-email-changing").modal("show")},error:function(e){$("#save-user-info").removeClass("button--processing"),console.log(e.responseText);var t=e.responseJSON.email;if(t&&t.length){var a=t.join("\n");$('[name="email"] + .user-page__field-error').text(a),$('[name="email"] + .user-page__field-error').show(),$('[name="email"]').addClass("input--error")}else $('[name="email"] + .user-page__field-error').text(""),$('[name="email"] + .user-page__field-error').hide(),$('[name="email"]').removeClass("input--error")}})))}),$("#submit_email_changing").on("click",function(){$("#confirm-email-changing").modal("hide"),$("#save-user-info").addClass("button--processing"),a()});var t="";function a(){$.ajax({url:$("#save-user-info-form").attr("action"),method:"POST",data:$("#save-user-info-form").serialize(),json:!0,success:function(e){console.log(e),$("#save-user-info").removeClass("button--processing"),t=e.success_url,$('.input[type="email"]').val()!=$('.input[type="email"]').attr("value")?($("#confirm-email-changing").modal("hide"),$("#verify-email-msg").modal("show"),$("#verify-email-msg .new-email").text($('.input[type="email"]').val())):t?window.location=t:window.location.reload()},error:function(e){console.log(e.responseText),$("#save-user-info").removeClass("button--processing");var t=e.responseJSON,a=t.errors.first_name,r=t.errors.last_name,n=t.errors.email;if(a&&a.length){s=a.join("\n");$('[name="first_name"] + .user-page__field-error').text(s),$('[name="first_name"] + .user-page__field-error').show(),$('[name="first_name"]').addClass("input--error")}else $('[name="first_name"] + .user-page__field-error').text(""),$('[name="first_name"] + .user-page__field-error').hide(),$('[name="first_name"]').removeClass("input--error");if(r&&r.length){s=r.join("\n");$('[name="last_name"] + .user-page__field-error').text(s),$('[name="last_name"] + .user-page__field-error').show(),$('[name="last_name"]').addClass("input--error")}else $('[name="last_name"] + .user-page__field-error').text(""),$('[name="last_name"] + .user-page__field-error').hide(),$('[name="last_name"]').removeClass("input--error");if(n&&n.length){var s=n.join("\n");$('[name="email"] + .user-page__field-error').text(s),$('[name="email"] + .user-page__field-error').show(),$('[name="email"]').addClass("input--error")}else $('[name="email"] + .user-page__field-error').text(""),$('[name="email"] + .user-page__field-error').hide(),$('[name="email"]').removeClass("input--error");t?showFormMessage(t.message):o.error("An error was accured","Error!",{positionClass:"toast-top-center"})}})}$(".verify-email-msg-close").on("click",function(){t?window.location=t:window.location.reload()}),$("#form-delete-account").on("submit",function(e){return e.preventDefault(),!1}),$("#account-delete-btn").on("click",function(){var t=$("#form-delete-account");$.ajax({url:t.attr("action"),method:"POST",data:t.serialize(),json:!0,success:function(t){e=t.success_url,$("#delete-account-promt").modal("hide"),$("#delete-account-success").modal("show")},error:function(e){var t=e.responseJSON,a=t.errors.password;if(a&&a.length){var r=a.join("\n");$("#conform-password + .form__field-error").text(r),$("#conform-password + .form__field-error").show(),$("#conform-password").addClass("input--error")}else $("#conform-password + .form__field-error").text(""),$("#conform-password + .form__field-error").hide(),$("#conform-password").removeClass("input--error");t?o.error(t.message,"Error!",{positionClass:"toast-top-center"}):o.error("An error was accured","Error!",{positionClass:"toast-top-center"})}})}),$("#delete-account-success").on("hidden.bs.modal",function(){e?window.location=e:window.location.reload()}),$("#change-password").on("hide.bs.modal",function(e){$("#oldpassword").val(""),$("#password1").val(""),$("#confirm-password").val(""),$("#password1 + .form__field-error").text(""),$("#password1 + .form__field-error").hide(),$('[name="password1"]').removeClass("input--error"),$("#oldpassword + .form__field-error").text(""),$("#oldpassword + .form__field-error").hide(),$('[name="oldpassword"]').removeClass("input--error"),$("#confirm-password").removeClass("input--error"),$(".confirm-password-error").hide()})});var c=a(31),m=a.n(c);function u(e,t,a,o,r,n,s){try{var i=e[n](s),l=i.value}catch(d){return void a(d)}i.done?t(l):Promise.resolve(l).then(o,r)}function h(e){return function(){var t=this,a=arguments;return new Promise(function(o,r){var n=e.apply(t,a);function s(e){u(n,o,r,s,i,"next",e)}function i(e){u(n,o,r,s,i,"throw",e)}s(void 0)})}}function p(e,t){var a="/billing/subscriptions/create/";t&&"null"!==t&&(a="/billing/subscriptions/"+t+"/update/");var o=new FormData;return o.set("plan",e),c.post(a,o).then(function(e){return e.data})}c.defaults.xsrfCookieName="csrftoken",c.defaults.xsrfHeaderName="X-CSRFTOKEN",$(document).ready(function(){if("undefined"!==typeof card){var e=new URL(window.location.href).searchParams.get("plan"),t=$(".preloader"),a=null,o=$("#address1").val(),r=$("#card-country").val(),n=$("#card-holder-name").val();$("#modal-success, #modal-choose-plan").on("hidden.bs.modal",function(){a?window.location=a:window.location.reload()}),$(".payment-edit-cancel").on("click",function(e){e.preventDefault(),$(".payment-edit-cancel").hide(),$(".payment-methods-add-btn").hide(),$(".payment-methods-edit-btn").show(),$(".payment-elements").addClass("disabled"),$(".form__field-error").hide(),$(".form-message.form-message--error").removeClass("active"),card.clear(),cardCvc.clear(),cardExpiry.clear(),postalCode.clear(),$("#card-country").val(r),$("#address1").val(o),$("#card-holder-name").val(n)}),$(".payment-methods-edit-btn").on("click",function(e){e.preventDefault(),$(".payment-edit-cancel").show(),$(".payment-methods-add-btn").show(),$(".payment-methods-edit-btn").hide(),$(".payment-elements").removeClass("disabled")});var s=document.getElementById("card-holder-name"),i=document.getElementById("address1"),l=document.getElementById("card-country");card.mount("#card-element"),cardCvc.mount("#cvc-element"),cardExpiry.mount("#card-expiry"),postalCode.mount("#postal-code"),card.addEventListener("change",function(e){var t=document.getElementById("card-errors");e.error?(t.textContent=e.error.message,$("#card-element").addClass("input--error"),$(t).show()):(t.textContent="",$("#card-element").removeClass("input--error"),$(t).hide())}),cardCvc.addEventListener("change",function(e){var t=document.getElementById("cvc-errors");e.error?(t.textContent=e.error.message,$("#cvc-element").addClass("input--error"),$(t).show()):(t.textContent="",$("#cvc-element").removeClass("input--error"),$(t).hide())}),cardExpiry.addEventListener("change",function(e){var t=document.getElementById("expiry-errors");e.error?(t.textContent=e.error.message,$("#card-expiry").addClass("input--error"),$(t).show()):(t.textContent="",$("#card-expiry").removeClass("input--error"),$(t).hide())}),postalCode.addEventListener("change",function(e){var t=document.getElementById("post-errors");e.error?(t.textContent=e.error.message,$("#postal-code").addClass("input--error"),$(t).show()):(t.textContent="",$("#postal-code").removeClass("input--error"),$(t).hide())});var d={name:!0,address:!0,country:!0};$(".payment-methods-add-btn").on("click",h(regeneratorRuntime.mark(function o(){var r,n,s,i,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t.addClass("preloader-show"),o.next=4,c.post("/api/v2/billing/setup_intent/").then(function(e){return e.data});case 4:return r=o.sent,console.log(r),o.next=8,m(r.client_secret);case 8:if(n=o.sent,console.log(n),!n||!n.error){o.next=14;break}return showFormMessage(n.error.message),t.removeClass("preloader-show"),o.abrupt("return");case 14:return s=n.setupIntent.payment_method,o.next=17,u=s,c.post("/api/v2/billing/payment_methods/add/",{payment_method:u}).then(function(e){return e.data});case 17:if(i=o.sent,console.log(i),a=i.success_url,ga("send",{hitType:"event",eventCategory:"billing",eventAction:"confirm"}),localStorage.removeItem("showModalIfNotOnThisPage"),!e){o.next=31;break}return o.next=25,p(e,subscriptionId);case 25:l=o.sent,t.removeClass("preloader-show"),l.success_url&&(a=l.success_url),$("#modal-choose-plan").modal("show"),o.next=33;break;case 31:t.removeClass("preloader-show"),(d=void 0)&&$("#modal-success").find(".modal-body").text(d),$("#modal-success").modal("show");case 33:o.next=40;break;case 35:o.prev=35,o.t0=o.catch(0),console.log(o.t0),t.removeClass("preloader-show"),showFormMessage(o.t0.message);case 40:case"end":return o.stop()}var d,u},o,this,[[0,35]])}))),$("#payment-form").on("submit",function(e){return e.preventDefault(),!1})}function m(e){var t,a={},o=s.value,r=i.value,n=l.value;(a.name=o,a.address={line1:r,country:n},o)?((t=document.getElementById("name-errors")).textContent="",$(t).hide(),$(s).removeClass("input--error"),d.name=!1):((t=document.getElementById("name-errors")).textContent="Card holder name field is empty",$(t).show(),$(s).addClass("input--error"),d.name=!0);n?((t=document.getElementById("country-errors")).textContent="",$(t).hide(),$(l).removeClass("input--error"),d.country=!1):((t=document.getElementById("country-errors")).textContent="Country field is empty",$(t).show(),$(l).addClass("input--error"),d.country=!0);r?((t=document.getElementById("address1-errors")).textContent="",$(t).hide(),$(i).removeClass("input--error"),d.address=!1):((t=document.getElementById("address1-errors")).textContent="Address field is empty",$(t).show(),$(i).addClass("input--error"),d.address=!0);return d.name||d.address||d.country?null:stripe.confirmCardSetup(e,{payment_method:{card:card,billing_details:a}})}});a(318);$(".faq-page__question").on("click",function(){$(this).parent().toggleClass("active")});var f=$(".switcher__button-circle");$(".switcher__button").on("click",function(){f.hasClass("left")?(f.removeClass("left").addClass("right"),data.unit="cm",$("[data-mode]").attr("data-mode","Metric")):(f.removeClass("right").addClass("left"),data.unit="in",$("[data-mode]").attr("data-mode","Imperial")),function(e,t){if(!e)return;$.ajax({url:"".concat("/api/v2/measurements/mtm-clients/").concat(e,"/"),method:"PUT",data:{unit:t},json:!0,success:function(e){console.log(e)},error:function(e){console.log(e)}})}(data.id,data.unit)}),$(".switcher__text-left").on("click",function(){$(f).hasClass("left")||$(this).closest(".switcher").find(".switcher__button").click()}),$(".switcher__text-right").on("click",function(){$(f).hasClass("right")||$(this).closest(".switcher").find(".switcher__button").click()});var v=$(".show-info-btn"),g=$(".content-block__additional-content"),_=$("#show-info-modal");v.on("click",function(){var e="";e=1===g.find(".content-block__information").length?g.find(".content-block__information").html():g.find(".active .content-block__information").first().html(),_.find(".modal-info").html(e),_.modal("show")}),$("#show-info-modal .got-it-button").on("click",function(){_.modal("hide")});a(319),a(320);var b,w,y,C,k=a(282),x=a(281),j=a.n(x),E=a(0),T=a.n(E),P=(a(349),a(2));P.MTLLoader=function(e){this.manager=void 0!==e?e:P.d},P.MTLLoader.prototype={constructor:P.MTLLoader,load:function(e,t,a,o){var r=this,n=new P.g(this.manager);n.setPath(this.path),n.load(e,function(e){t(r.parse(e))},a,o)},setPath:function(e){return this.path=e,this},setTexturePath:function(e){return this.texturePath=e,this},setBaseUrl:function(e){return console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e){for(var t=e.split("\n"),a={},o=/\s+/,r={},n=0;n<t.length;n++){var s=t[n];if(0!==(s=s.trim()).length&&"#"!==s.charAt(0)){var i=s.indexOf(" "),l=i>=0?s.substring(0,i):s;l=l.toLowerCase();var d=i>=0?s.substring(i+1):"";if(d=d.trim(),"newmtl"===l)a={name:d},r[d]=a;else if(a)if("ka"===l||"kd"===l||"ks"===l){var c=d.split(o,3);a[l]=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2])]}else a[l]=d}}var m=new P.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return m.setCrossOrigin(this.crossOrigin),m.setManager(this.manager),m.setMaterials(r),m}},P.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:P.k,this.wrap=this.options&&this.options.wrap?this.options.wrap:P.E},P.MTLLoader.MaterialCreator.prototype={constructor:P.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var a in e){var o=e[a],r={};for(var n in t[a]=r,o){var s=!0,i=o[n],l=n.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(i=[i[0]/255,i[1]/255,i[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===i[0]&&0===i[1]&&0===i[2]&&(s=!1)}s&&(r[l]=i)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,a=this.materialsInfo[e],o={name:e,side:this.side};function r(e,a){if(!o[e]){var r,n,s=t.getTextureParams(a,o),i=t.loadTexture((r=t.baseUrl,"string"!==typeof(n=s.url)||""===n?"":/^https?:\/\//i.test(n)?n:r+n));i.repeat.copy(s.scale),i.offset.copy(s.offset),i.wrapS=t.wrap,i.wrapT=t.wrap,o[e]=i}}for(var n in a){var s,i=a[n];if(""!==i)switch(n.toLowerCase()){case"kd":o.color=(new P.c).fromArray(i);break;case"ks":o.specular=(new P.c).fromArray(i);break;case"map_kd":r("map",i);break;case"map_ks":r("specularMap",i);break;case"norm":r("normalMap",i);break;case"map_bump":case"bump":r("bumpMap",i);break;case"ns":o.shininess=parseFloat(i);break;case"d":(s=parseFloat(i))<1&&(o.opacity=s,o.transparent=!0);break;case"tr":s=parseFloat(i),this.options&&this.options.invertTrProperty&&(s=1-s),s>0&&(o.opacity=1-s,o.transparent=!0)}}return this.materials[e]=new P.v(o),this.materials[e]},getTextureParams:function(e,t){var a,o={scale:new P.I(1,1),offset:new P.I(0,0)},r=e.split(/\s+/);return(a=r.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(r[a+1]),r.splice(a,2)),(a=r.indexOf("-s"))>=0&&(o.scale.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),(a=r.indexOf("-o"))>=0&&(o.offset.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),o.url=r.join(" ").trim(),o},loadTexture:function(e,t,a,o,r){var n,s=P.q.Handlers.get(e),i=void 0!==this.manager?this.manager:P.d;return null===s&&(s=new P.H(i)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),n=s.load(e,a,o,r),void 0!==t&&(n.mapping=t),n}},P.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,a=/^usemtl /;function o(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var a=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);var o={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==a?a.smooth:this.smooth,groupStart:void 0!==a?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},a&&a.name&&"function"===typeof a.clone){var o=a.clone(0);o.inherited=!0,this.object.materials.push(o)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var a=parseInt(e,10);return 3*(a>=0?a-1:a+t/3)},parseNormalIndex:function(e,t){var a=parseInt(e,10);return 3*(a>=0?a-1:a+t/3)},parseUVIndex:function(e,t){var a=parseInt(e,10);return 2*(a>=0?a-1:a+t/2)},addVertex:function(e,t,a){var o=this.vertices,r=this.object.geometry.vertices;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[t+0],o[t+1],o[t+2]),r.push(o[a+0],o[a+1],o[a+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,a){var o=this.normals,r=this.object.geometry.normals;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[t+0],o[t+1],o[t+2]),r.push(o[a+0],o[a+1],o[a+2])},addColor:function(e,t,a){var o=this.colors,r=this.object.geometry.colors;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[t+0],o[t+1],o[t+2]),r.push(o[a+0],o[a+1],o[a+2])},addUV:function(e,t,a){var o=this.uvs,r=this.object.geometry.uvs;r.push(o[e+0],o[e+1]),r.push(o[t+0],o[t+1]),r.push(o[a+0],o[a+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,a,o,r,n,s,i,l){var d=this.vertices.length,c=this.parseVertexIndex(e,d),m=this.parseVertexIndex(t,d),u=this.parseVertexIndex(a,d);if(this.addVertex(c,m,u),void 0!==o&&""!==o){var h=this.uvs.length;c=this.parseUVIndex(o,h),m=this.parseUVIndex(r,h),u=this.parseUVIndex(n,h),this.addUV(c,m,u)}if(void 0!==s&&""!==s){var p=this.normals.length;c=this.parseNormalIndex(s,p),m=s===i?c:this.parseNormalIndex(i,p),u=s===l?c:this.parseNormalIndex(l,p),this.addNormal(c,m,u)}this.colors.length>0&&this.addColor(c,m,u)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,a=0,o=e.length;a<o;a++)this.addVertexPoint(this.parseVertexIndex(e[a],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var a=this.vertices.length,o=this.uvs.length,r=0,n=e.length;r<n;r++)this.addVertexLine(this.parseVertexIndex(e[r],a));var s=0;for(n=t.length;s<n;s++)this.addUVLine(this.parseUVIndex(t[s],o))}};return e.startObject("",!1),e}function r(e){this.manager=void 0!==e?e:P.d,this.materials=null}return r.prototype={constructor:r,load:function(e,t,a,o){var r=this,n=new P.g(r.manager);n.setPath(this.path),n.load(e,function(e){t(r.parse(e))},a,o)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(r){console.time("OBJLoader");var n=new o;-1!==r.indexOf("\r\n")&&(r=r.replace(/\r\n/g,"\n")),-1!==r.indexOf("\\\n")&&(r=r.replace(/\\\n/g,""));for(var s=r.split("\n"),i="",l="",d=[],c="function"===typeof"".trimLeft,m=0,u=s.length;m<u;m++)if(i=s[m],0!==(i=c?i.trimLeft():i.trim()).length&&"#"!==(l=i.charAt(0)))if("v"===l){var h=i.split(/\s+/);switch(h[0]){case"v":n.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),8===h.length&&n.colors.push(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]));break;case"vn":n.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":n.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===l){for(var p=i.substr(1).trim().split(/\s+/),f=[],v=0,g=p.length;v<g;v++){var _=p[v];if(_.length>0){var b=_.split("/");f.push(b)}}var w=f[0];for(v=1,g=f.length-1;v<g;v++){var $=f[v],y=f[v+1];n.addFace(w[0],$[0],y[0],w[1],$[1],y[1],w[2],$[2],y[2])}}else if("l"===l){var C=i.substring(1).trim().split(" "),k=[],x=[];if(-1===i.indexOf("/"))k=C;else for(var j=0,E=C.length;j<E;j++){var T=C[j].split("/");""!==T[0]&&k.push(T[0]),""!==T[1]&&x.push(T[1])}n.addLineGeometry(k,x)}else if("p"===l){var O=i.substr(1).trim().split(" ");n.addPointGeometry(O)}else if(null!==(d=e.exec(i))){var I=(" "+d[0].substr(1).trim()).substr(1);n.startObject(I)}else if(a.test(i))n.object.startMaterial(i.substring(7).trim(),n.materialLibraries);else if(t.test(i))n.materialLibraries.push(i.substring(7).trim());else{if("s"!==l){if("\0"===i)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+i+'"')}if((d=i.split(" ")).length>1){var A=d[1].trim().toLowerCase();n.object.smooth="0"!==A&&"off"!==A}else n.object.smooth=!0;(H=n.object.currentMaterial())&&(H.smooth=n.object.smooth)}n.finalize();var L=new P.m;L.materialLibraries=[].concat(n.materialLibraries);for(m=0,u=n.objects.length;m<u;m++){var M=n.objects[m],S=M.geometry,N=M.materials,D="Line"===S.type,R="Points"===S.type,z=!1;if(0!==S.vertices.length){var q=new P.b;q.addAttribute("position",new P.i(S.vertices,3)),S.normals.length>0?q.addAttribute("normal",new P.i(S.normals,3)):q.computeVertexNormals(),S.colors.length>0&&(z=!0,q.addAttribute("color",new P.i(S.colors,3))),S.uvs.length>0&&q.addAttribute("uv",new P.i(S.uvs,2));for(var Y,F=[],U=0,G=N.length;U<G;U++){var B=N[U],H=void 0;if(null!==this.materials)if(H=this.materials.create(B.name),!D||!H||H instanceof P.o){if(R&&H&&!(H instanceof P.C)){var V=new P.C({size:10,sizeAttenuation:!1});J.copy(H),H=V}}else{var J=new P.o;J.copy(H),J.lights=!1,H=J}H||((H=D?new P.o:R?new P.C({size:1,sizeAttenuation:!1}):new P.v).name=B.name),H.flatShading=!B.smooth,H.vertexColors=z?P.K:P.w,F.push(H)}if(F.length>1){for(U=0,G=N.length;U<G;U++){B=N[U];q.addGroup(B.groupStart,B.groupCount,U)}Y=D?new P.p(q,F):R?new P.B(q,F):new P.t(q,F)}else Y=D?new P.p(q,F[0]):R?new P.B(q,F[0]):new P.t(q,F[0]);Y.name=M.name,L.add(Y)}}return console.timeEnd("OBJLoader"),L}},r}(),P.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new P.J,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:P.r.LEFT,ZOOM:P.r.MIDDLE,PAN:P.r.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return phi},this.getAzimuthalAngle=function(){return theta},this.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(o),a.update(),i=s.NONE},this.update=function(){var t=new P.J,r=(new P.D).setFromUnitVectors(e.up,new P.J(0,1,0)),n=r.clone().inverse(),p=new P.J,f=new P.D;return function(){var e=a.object.position;return t.copy(e).sub(a.target),t.applyQuaternion(r),d.setFromVector3(t),a.autoRotate&&i===s.NONE&&k(2*Math.PI/60/60*a.autoRotateSpeed),d.theta+=c.theta,d.phi+=c.phi,d.theta=Math.max(a.minAzimuthAngle,Math.min(a.maxAzimuthAngle,d.theta)),d.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=m,d.radius=Math.max(a.minDistance,Math.min(a.maxDistance,d.radius)),a.target.add(u),t.setFromSpherical(d),t.applyQuaternion(n),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(c.theta*=1-a.dampingFactor,c.phi*=1-a.dampingFactor):c.set(0,0,0),m=1,u.set(0,0,0),!!(h||p.distanceToSquared(a.object.position)>l||8*(1-f.dot(a.object.quaternion))>l)&&(a.dispatchEvent(o),p.copy(a.object.position),f.copy(a.object.quaternion),h=!1,!0)}}(),this.dispose=function(){a.domElement.removeEventListener("contextmenu",q,!1),a.domElement.removeEventListener("mousedown",A,!1),a.domElement.removeEventListener("mousewheel",S,!1),a.domElement.removeEventListener("MozMousePixelScroll",S,!1),a.domElement.removeEventListener("touchstart",D,!1),a.domElement.removeEventListener("touchend",z,!1),a.domElement.removeEventListener("touchmove",R,!1),document.removeEventListener("mousemove",L,!1),document.removeEventListener("mouseup",M,!1),document.removeEventListener("mouseout",M,!1),window.removeEventListener("keydown",N,!1)};var a=this,o={type:"change"},r={type:"start"},n={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},i=s.NONE,l=1e-6,d=new P.G,c=new P.G,m=1,u=new P.J,h=!1,p=new P.I,f=new P.I,v=new P.I,g=new P.I,_=new P.I,b=new P.I,w=new P.I,$=new P.I,y=new P.I;function C(){return Math.pow(.95,a.zoomSpeed)}function k(e){c.theta-=e}function x(e){c.phi-=e}var j=function(){var e=new P.J;return function(t,a){e.setFromMatrixColumn(a,0),e.multiplyScalar(-t),u.add(e)}}(),E=function(){var e=new P.J;return function(t,a){e.setFromMatrixColumn(a,1),e.multiplyScalar(t),u.add(e)}}(),T=function(){var e=new P.J;return function(t,o){var r=a.domElement===document?a.domElement.body:a.domElement;if(a.object instanceof P.A){var n=a.object.position;e.copy(n).sub(a.target);var s=e.length();s*=Math.tan(a.object.fov/2*Math.PI/180),j(2*t*s/r.clientHeight,a.object.matrix),E(2*o*s/r.clientHeight,a.object.matrix)}else a.object instanceof P.z?(j(t*(a.object.right-a.object.left)/a.object.zoom/r.clientWidth,a.object.matrix),E(o*(a.object.top-a.object.bottom)/a.object.zoom/r.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function O(e){a.object instanceof P.A?m/=e:a.object instanceof P.z?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function I(e){a.object instanceof P.A?m*=e:a.object instanceof P.z?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function A(e){if(!1!==a.enabled){if(e.preventDefault(),e.button===a.mouseButtons.ORBIT){if(!1===a.enableRotate)return;!function(e){p.set(e.clientX,e.clientY)}(e),i=s.ROTATE}else if(e.button===a.mouseButtons.ZOOM){if(!1===a.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),i=s.DOLLY}else if(e.button===a.mouseButtons.PAN){if(!1===a.enablePan)return;!function(e){g.set(e.clientX,e.clientY)}(e),i=s.PAN}i!==s.NONE&&(document.addEventListener("mousemove",L,!1),document.addEventListener("mouseup",M,!1),document.addEventListener("mouseout",M,!1),a.dispatchEvent(r))}}function L(e){if(!1!==a.enabled)if(e.preventDefault(),i===s.ROTATE){if(!1===a.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),v.subVectors(f,p);var t=a.domElement===document?a.domElement.body:a.domElement;k(2*Math.PI*v.x/t.clientWidth*a.rotateSpeed),x(2*Math.PI*v.y/t.clientHeight*a.rotateSpeed),p.copy(f),a.update()}(e)}else if(i===s.DOLLY){if(!1===a.enableZoom)return;!function(e){$.set(e.clientX,e.clientY),y.subVectors($,w),y.y>0?O(C()):y.y<0&&I(C()),w.copy($),a.update()}(e)}else if(i===s.PAN){if(!1===a.enablePan)return;!function(e){_.set(e.clientX,e.clientY),b.subVectors(_,g),T(b.x,b.y),g.copy(_),a.update()}(e)}}function M(e){!1!==a.enabled&&(document.removeEventListener("mousemove",L,!1),document.removeEventListener("mouseup",M,!1),document.removeEventListener("mouseout",M,!1),a.dispatchEvent(n),i=s.NONE)}function S(e){!1===a.enabled||!1===a.enableZoom||i!==s.NONE&&i!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?I(C()):t<0&&O(C()),a.update()}(e),a.dispatchEvent(r),a.dispatchEvent(n))}function N(e){!1!==a.enabled&&!1!==a.enableKeys&&!1!==a.enablePan&&function(e){switch(e.keyCode){case a.keys.UP:T(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:T(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:T(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:T(-a.keyPanSpeed,0),a.update()}}(e)}function D(e){if(!1!==a.enabled){switch(e.touches.length){case 1:if(!1===a.enableRotate)return;!function(e){p.set(e.touches[0].pageX,e.touches[0].pageY)}(e),i=s.TOUCH_ROTATE;break;case 2:if(!1===a.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+a*a);w.set(0,o)}(e),i=s.TOUCH_DOLLY;break;case 3:if(!1===a.enablePan)return;!function(e){g.set(e.touches[0].pageX,e.touches[0].pageY)}(e),i=s.TOUCH_PAN;break;default:i=s.NONE}i!==s.NONE&&a.dispatchEvent(r)}}function R(e){if(!1!==a.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===a.enableRotate)return;if(i!==s.TOUCH_ROTATE)return;!function(e){f.set(e.touches[0].pageX,e.touches[0].pageY),v.subVectors(f,p);var t=a.domElement===document?a.domElement.body:a.domElement;k(2*Math.PI*v.x/t.clientWidth*a.rotateSpeed),x(2*Math.PI*v.y/t.clientHeight*a.rotateSpeed),p.copy(f),a.update()}(e);break;case 2:if(!1===a.enableZoom)return;if(i!==s.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+o*o);$.set(0,r),y.subVectors($,w),y.y>0?I(C()):y.y<0&&O(C()),w.copy($),a.update()}(e);break;case 3:if(!1===a.enablePan)return;if(i!==s.TOUCH_PAN)return;!function(e){_.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(_,g),T(b.x,b.y),g.copy(_),a.update()}(e);break;default:i=s.NONE}}function z(e){!1!==a.enabled&&(a.dispatchEvent(n),i=s.NONE)}function q(e){e.preventDefault()}a.domElement.addEventListener("contextmenu",q,!1),a.domElement.addEventListener("mousedown",A,!1),a.domElement.addEventListener("mousewheel",S,!1),a.domElement.addEventListener("MozMousePixelScroll",S,!1),a.domElement.addEventListener("touchstart",D,!1),a.domElement.addEventListener("touchend",z,!1),a.domElement.addEventListener("touchmove",R,!1),window.addEventListener("keydown",N,!1),this.update()},P.OrbitControls.prototype=Object.create(P.f.prototype),P.OrbitControls.prototype.constructor=P.OrbitControls,Object.defineProperties(P.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=e}}});var O,I=window.innerWidth/2,A=window.innerHeight/2;function L(e){return new Promise(function(t,a){var o=function(e){},r=function(e){a(new Error(e.responseText))};(new P.MTLLoader).setPath("/static/persons/").load("out_scene.mtl",function(a){a.preload(),(new P.OBJLoader).setMaterials(a).load(e,function(e){return e.children.forEach(function(e){e.material=new P.u({color:new P.c(11382189),emissive:new P.c(7566195),shading:P.h,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,fog:!1,side:P.e})}),t(e)},o,r)})})}function M(e){(y=new P.F).add(w),y.fog=new P.j(15198443,.015),y.add(e);var t=(new P.a).setFromObject(e);t.getCenter(e.position),e.localToWorld(t),e.position.multiplyScalar(-1);var a=y.position,o=(new P.a).setFromObject(y),r=Math.max(o.getSize().y,o.getSize().x),n=w.fov*(Math.PI/180),s=Math.abs(r/Math.sin(n/2));w.position.set(a.x,a.y,s+r/2),w.zoom=2.5,w.updateProjectionMatrix();var i=new P.l(r,80);i.position.y-=r/2,i.rotation.y=Math.PI/4,y.add(i);var l=new P.n(15658734,8947848,.5);l.position.set(0,20,0),y.add(l)}function S(){b=document.querySelector(".body-model__model-viewer"),(w=new P.A(50,b.offsetWidth/b.offsetHeight,1,1e7)).position.z=250,y=new P.F,(C=new P.L).setClearColor(new P.c(16777215)),C.setPixelRatio(window.devicePixelRatio),C.setSize(b.offsetWidth,b.offsetHeight),C.shadowMap.enabled=!0,b.appendChild(C.domElement),(O=new P.OrbitControls(w,C.domElement)).enableDamping=!0,O.dampingFactor=.25,O.enableZoom=!0,document.addEventListener("mousemove",D,!1),window.addEventListener("resize",N,!1),window.data.model&&($(".body-model__model-tip").text("Model is loading..."),L(data.model).then(function(e){$(".body-model__model-tip").text("Use mouse to move the model"),M(e)}).catch(function(e){$(".body-model__model-tip").text("Model loading is failed"),console.log(e)}))}function N(){var e=b.offsetWidth,t=b.offsetHeight;w.aspect=e/t,w.updateProjectionMatrix(),C.setSize(e,t)}function D(e){(e.clientX-I)/2,(e.clientY-A)/2}function R(){requestAnimationFrame(R),O.update(),C.render(y,w)}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},o=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),o.forEach(function(t){Y(e,t,a[t])})}return e}function q(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}$(document).ready(function(){data.model&&($(".body-model__download-btn").attr("href",data.model).addClass("active"),S(),R())});var F={status:"created",returnUrl:"".concat(window.location.origin,"/history/dashboard/")},U=window.location.origin,G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Y(this,"flowId",null),this.axios=m.a.create(),this.axios.defaults.headers={Authorization:"APIKey ".concat(t)}}var t,a,o;return t=e,(a=[{key:"setFlowId",value:function(e){this.flowId=e}},{key:"create",value:function(e){var t=this;return F=z({},F,e),this.axios({url:"".concat(U,"/api/v2/persons/widget/"),method:"POST",data:{state:z({},F)}}).then(function(e){return t.flowId=e.data.uuid,t.flowId})}},{key:"shortenLink",value:function(e){var t=this;return this.axios({url:"".concat(U,"/api/v2/measurements/shorting-link/"),method:"POST",data:{link:e}}).then(function(e){var a=e.data.short_link;return t.updateState({widgetUrl:a}),a})}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.flowId;return this.axios({url:"".concat(U,"/api/v2/persons/widget/").concat(e,"/"),method:"GET"}).then(function(e){return e.data})}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.flowId;return this.axios({url:"".concat(U,"/api/v2/persons/widget/").concat(t,"/"),method:"PATCH",data:z({},e,{state:z({},F,e.state)})}).then(function(e){return e.data})}},{key:"updateState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.flowId;return F=z({},F,e),this.axios({url:"".concat(U,"/api/v2/persons/widget/").concat(t,"/"),method:"PATCH",data:{state:z({},F)}}).then(function(e){return e.data})}}])&&q(t.prototype,a),o&&q(t,o),e}(),B=$(".customer-info__param--name .customer-info__param-value"),H=$(".customer-info__param--name .editable__input"),V=$(".customer-info__param--email .customer-info__param-value"),J=$(".customer-info__param--phone .customer-info__param-value"),Z=$(".customer-info__param--height .customer-info__param-value"),W=$(".customer-info__param--gender .customer-info__param-value"),K=$(".customer-info__param--weight .customer-info__param-value"),X=$(".customer-info__param--notes .customer-info__param-value"),Q=$(".customer-info__param--notes .editable__input"),ee=$(".body-model__download-btn");function te(){if(data.firstName?(B.text(data.firstName),H.val(data.firstName),H.attr("value",data.firstName)):(B.text(" \u2014 "),H.val(""),H.attr("value","")),data.email?(V.text(data.email),V.attr("href","mailto:".concat(data.email))):(V.text(" \u2014 "),V.attr("href","#")),data.phone?(J.text(data.phone),J.attr("href","tel:".concat(data.phone))):(J.text(" \u2014 "),J.attr("href","#")),"cm"===data.unit)Z.text("".concat(data.height," cm"));else{var e=r(data.height);Z.text("".concat(e.ft,"' ").concat(e.in,"''"))}W.text(data.gender),data.weightBottomBorder&&data.weightTopBorder?"cm"===data.unit?K.text("".concat(data.weightBottomBorder," \u2014 ").concat(data.weightTopBorder," Kg")):K.text("".concat(s(data.weightBottomBorder)," \u2014 ").concat(s(data.weightTopBorder)," Lb")):data.weight?"cm"===data.unit?K.text("".concat(data.weight," Kg")):K.text("".concat(s(data.weight)," Lb")):K.text(" \u2014 "),data.notes?(X.text(data.notes),Q.val(data.notes),Q.attr("value",data.notes)):(X.text(" \u2014 "),Q.val(""),Q.attr("value",""))}function ae(){var e;(data.front_params||data.side_params||data.volume_params)&&($(".flow").hasClass("flow--mtm")||$(".customer-details").hasClass("customer-details--mtm")?e=[{id:"#chest",value:data.volume_params.chest},{id:"#under-bust-girth",value:data.volume_params.under_bust_girth},{id:"#upper-chest-girth",value:data.volume_params.upper_chest_girth},{id:"#waist",value:data.volume_params.waist},{id:"#high-hips",value:data.volume_params.high_hips},{id:"#low-hips",value:data.volume_params.low_hips},{id:"#bicep",value:data.volume_params.bicep},{id:"#knee",value:data.volume_params.knee},{id:"#ankle",value:data.volume_params.ankle},{id:"#wrist",value:data.volume_params.wrist},{id:"#calf",value:data.volume_params.calf},{id:"#thigh",value:data.volume_params.thigh},{id:"#mid-thigh-girth",value:data.volume_params.mid_thigh_girth},{id:"#neck",value:data.volume_params.neck},{id:"#abdomen",value:data.volume_params.abdomen},{id:"#armscye-girth",value:data.volume_params.armscye_girth},{id:"#neck-girth",value:data.volume_params.neck_girth},{id:"#forearm",value:data.volume_params.forearm},{id:"#elbow-girth",value:data.volume_params.elbow_girth},{id:"#body-height",value:data.front_params.body_height},{id:"#outseam",value:data.front_params.outseam},{id:"#inseam",value:data.front_params.inseam},{id:"#crotch-length",value:data.front_params.crotch_length},{id:"#arm-length",value:data.front_params.sleeve_length},{id:"#back-neck-point-to-wrist-length",value:data.front_params.back_neck_point_to_wrist_length},{id:"#high-hips-width",value:data.front_params.high_hips},{id:"#shoulders",value:data.front_params.shoulders},{id:"#chest-top",value:data.front_params.chest_top},{id:"#jacket-length",value:data.front_params.jacket_length},{id:"#shoulder-length",value:data.front_params.shoulder_length},{id:"#shoulder-slope",value:data.front_params.shoulder_slope,unit:"\xb0"},{id:"#neck-base",value:data.front_params.neck},{id:"#waist-to-low-hips",value:data.front_params.waist_to_low_hips},{id:"#waist-to-knees",value:data.front_params.waist_to_knees},{id:"#nape-to-waist-centre-back",value:data.front_params.nape_to_waist_centre_back},{id:"#shoulder-to-waist",value:data.front_params.shoulder_to_waist},{id:"#side-neck-point-to-armpit",value:data.front_params.side_neck_point_to_armpit},{id:"#back-neck-height",value:data.front_params.back_neck_height},{id:"#bust-height",value:data.front_params.bust_height},{id:"#hip-height",value:data.front_params.hip_height},{id:"#upper-hip-height",value:data.front_params.upper_hip_height},{id:"#knee-height",value:data.front_params.knee_height},{id:"#outer-ankle-height",value:data.front_params.outer_ankle_height},{id:"#waist-height",value:data.front_params.waist_height},{id:"#inside-leg-height",value:data.front_params.inside_leg_height},{id:"#across-back-shoulder-width",value:data.front_params.across_back_shoulder_width},{id:"#across-back-width",value:data.front_params.across_back_width},{id:"#total-crotch-length",value:data.front_params.total_crotch_length},{id:"#waist-breadth",value:data.front_params.waist},{id:"#neck-length",value:data.front_params.neck_length},{id:"#upper-arm-length",value:data.front_params.upper_arm_length},{id:"#lower-arm-length",value:data.front_params.lower_arm_length},{id:"#upper-hip-to-hip-length",value:data.front_params.upper_hip_to_hip_length},{id:"#shoulders-width",value:data.front_params.back_shoulder_width},{id:"#rise",value:data.front_params.rise},{id:"#back-neck-to-hip-length",value:data.front_params.back_neck_to_hip_length},{id:"#torso-height",value:data.front_params.torso_height},{id:"#front-crotch-length",value:data.front_params.front_crotch_length},{id:"#back-crotch-length",value:data.front_params.back_crotch_length},{id:"#side-upper-hip-level-to-knee",value:data.side_params.side_upper_hip_level_to_knee},{id:"#side-neck-point-to-upper-hip",value:data.side_params.side_neck_point_to_upper_hip},{id:"#neck-to-chest",value:data.side_params.neck_to_chest},{id:"#chest-to-waist",value:data.side_params.chest_to_waist},{id:"#waist-to-ankle",value:data.side_params.waist_to_ankle},{id:"#shoulders-to-knees",value:data.side_params.shoulders_to_knees}]:($(".flow").hasClass("flow--3d")||$(".customer-details").hasClass("customer-details--3d"))&&(e=[{id:"#chest",value:data.volume_params.chest},{id:"#waist",value:data.volume_params.waist},{id:"#high-hips",value:data.volume_params.high_hips},{id:"#low-hips",value:data.volume_params.low_hips},{id:"#body-height",value:data.front_params.body_height},{id:"#inseam",value:data.front_params.inseam},{id:"#shoulders",value:data.front_params.shoulders}]),"cm"===data.unit?e.forEach(function(e){e.value?e.unit?$(e.id).val("".concat(e.value.toFixed(1)).concat(e.unit)):$(e.id).val("".concat(e.value.toFixed(1)," cm")):$(e.id).val(" \u2014 ")}):"in"===data.unit&&e.forEach(function(e){e.value?e.unit?$(e.id).val("".concat(e.value.toFixed(1)).concat(e.unit)):$(e.id).val("".concat((e.value.toFixed(1)/2.54).toFixed(1),"''")):$(e.id).val(" \u2014 ")}))}function oe(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}$(document).ready(function(){$(".main-content__back-anchor").on("click",function(e){e.preventDefault(),window.history.back()}),$(".result .switcher__button").on("click",function(){te(),ae()}),$(".body-model__model-viewer:visible").length&&data&&data.volume_params&&data.volume_params.body_model&&(init(),animate(),ee.attr("href",data.volume_params.body_model).addClass("active")),ee.on("click",function(){ga("send",{hitType:"event",eventCategory:"3D_model",eventAction:"download",eventLabel:"direct"})}),$(".measurements__param .text").popover({html:!0,placement:function(e,t){var a=$(t)[0].getBoundingClientRect();return $(window).height()-a.bottom<350?"top":"bottom"},trigger:"hover",container:"body",content:function(){return $(this).next(".popover.measurement").html()},template:'<div class="popover measurement">\n    <div class="arrow"></div>\n    <div class="popover-content"></div>\n    </div>'}),$(".measurements__title").on("click",function(){$(this).closest(".measurements__params").hasClass("active")?($(this).closest(".measurements__params").removeClass("active"),$(this).closest(".measurements__params").find(".measurements__params-wrapper").slideUp()):($(this).closest(".measurements__params").addClass("active"),$(this).closest(".measurements__params").find(".measurements__params-wrapper").slideDown())});var e=$(".editable");if(e.length){var t=function(e){e.removeClass("editable--error"),e.find(".editable__error").text("")};e.click(function(e){var a=$(e.target),o=$(this),r=o.find(".editable__input");if(a.hasClass("editable")||a.hasClass("editable__btn--edit")){var n=o.closest(".customer-info__param").find(".customer-info__param-value").text(),s=" \u2014 "===n?"":n;$(this).addClass("editable--active"),r.attr("readonly",!1).val(s).attr("value",s),r.focus().select()}if(a.hasClass("editable__btn--reset"))return t(o),o.removeClass("editable--error"),o.removeClass("editable--active"),void r.val(r.attr("value"));if(a.hasClass("editable__btn--save")){var i=window.data.id;if(t(o),o.removeClass("editable--error"),o.find(".editable__error").text(""),r.val()!==r.attr("value")){if(!function(e){return!!function(e){if("first_name"===e.attr("name")){if(e.val().length>40)return e.parent().find(".editable__error").text("No more than 40 characters"),e.parent().addClass("editable--error"),!1}else if("notes"===e.attr("name")&&e.val().length>500)return e.parent().find(".editable__error").text("No more than 500 characters"),e.parent().addClass("editable--error"),!1;return!0}(e)&&!!function(e){return"first_name"!==e.attr("name")||0!==e.val().length||(e.parent().find(".editable__error").text("Unique name is required"),e.parent().addClass("editable--error"),!1)}(e)&&!!function(e){if("first_name"===e.attr("name")){if(" "===e.val().charAt(0)||" "===e.val().charAt(e.val().length-1))return e.parent().find(".editable__error").text("Don't use whitespaces at the start/end of unique name"),e.parent().addClass("editable--error"),!1}else if("notes"===e.attr("name")&&e.val()&&!e.val().replace(/\s/g,"").length)return e.parent().find(".editable__error").text("This field can't contain only spaces"),e.parent().addClass("editable--error"),!1;return!0}(e)}(r))return;var l={};return"first_name"===r.attr("name")?l.first_name=r.val():"notes"===r.attr("name")&&(l.notes=r.val()),void $.ajax({url:"/api/v2/measurements/mtm-clients/".concat(i,"/"),method:"PUT",data:l,json:!0,success:function(e){data.firstName=e.first_name,data.notes=e.notes,o.removeClass("editable--active editable--error"),te()},error:function(e){var t="";e.responseJSON.first_name?t=e.responseJSON.first_name[0]:e.responseJSON.notes&&(t=e.responseJSON.notes[0]),o.addClass("editable--error"),o.find(".editable__error").text(t)}})}o.removeClass("editable--active"),r.val(r.attr("value"))}}),$(".customer-info__param--name .editable__input").keypress(function(e){13==e.keyCode&&e.preventDefault()})}});var re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.step=.01,this.percentage=0,this.loadingProcess=null}var t,a,o;return t=e,(a=[{key:"start",value:function(){var e=this,t=.1;this.step=.01,this.percentage=0,this.loadingProcess=setInterval(function(){t+=e.step,e.percentage=Math.round(Math.round(Math.atan(Math.pow(t,2))/(Math.PI/2)*100*100)/100),$(".loading__percentage").text("".concat(e.percentage,"%")),$(".loading__circle").css("stroke-dasharray","".concat(e.percentage,", 100"))},250)}},{key:"speedUp",value:function(e){this.step*=e}},{key:"stop",value:function(){$(".loading__percentage").text("1%"),$(".loading__circle").removeAttr("style"),clearInterval(this.loadingProcess)}},{key:"setStatus",value:function(e){$(".flow__loading-status").text(e)}},{key:"startSimpleLoader",value:function(){$(".loading__circular-chart").hide(),$(".loading__alternate-simple-preloader").addClass("active")}},{key:"stopSimpleLoader",value:function(){$(".loading__circular-chart").show(),$(".loading__alternate-simple-preloader").removeClass("active")}}])&&oe(t.prototype,a),o&&oe(t,o),e}();a(350);function ne(e,t,a,o,r,n,s){try{var i=e[n](s),l=i.value}catch(d){return void a(d)}i.done?t(l):Promise.resolve(l).then(o,r)}function se(e){return function(){var t=this,a=arguments;return new Promise(function(o,r){var n=e.apply(t,a);function s(e){ne(n,o,r,s,i,"next",e)}function i(e){ne(n,o,r,s,i,"throw",e)}s(void 0)})}}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var le,de,ce,me={video:{facingMode:{exact:"environment"},width:{exact:1280}},audio:!1},ue=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ie(this,"startStream",se(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(me);case 3:t.stream=e.sent,t.video.srcObject=t.stream,$(".camera-take-photo").attr("disabled",!1),$(".camera").removeClass("hidden"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),$(".camera-take-photo").attr("disabled",!0),alert("Oops!Uploading photo requires access to the camera. Please reopen this page and try again.");case 13:case"end":return e.stop()}},e,this,[[0,9]])}))),ie(this,"takePhoto",function(){var e=se(regeneratorRuntime.mark(function e(a){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{o=t.stream.getVideoTracks()[0].getSettings(),(r=document.createElement("canvas")).width=o.width,r.height=o.height,r.getContext("2d").drawImage(t.video,0,0,r.width,r.height),r.toBlob(a)}catch(n){console.log(n),alert("Error: ".concat(n))}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),ie(this,"orientation",function(e){var a=e.beta,o=e.gamma;setTimeout(function(){t.normalizeData(o,a)},50)}),ie(this,"normalizeData",function(e,a){t.b=Math.round(a),t.g=Math.round(e),t.rotY+=(t.g-t.rotY)/5,t.rotX+=(t.b-t.rotX)/5,t.b&&t.b<75||t.b&&t.b>105?$(".camera__warning").removeClass("hidden"):$(".camera__warning").addClass("hidden")}),this.width=document.body.clientWidth,this.height=document.body.clientHeight,this.video=document.querySelector(".camera-video"),this.rotX=0,this.rotY=0};function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],o=!0,r=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(l){r=!0,n=l}finally{try{o||null==i.return||i.return()}finally{if(r)throw n}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function pe(e,t,a,o,r,n,s){try{var i=e[n](s),l=i.value}catch(d){return void a(d)}i.done?t(l):Promise.resolve(l).then(o,r)}window.data={firstName:null,phone:null,email:null,unit:"in",height:null,weight:null,gender:null,notes:null,frontImage:null,sideImage:null};var fe=new re,ve=$(".flow-steps__step"),ge=$(".flow__customer-data"),_e=$(".flow__customer-data-info"),be=ge.find(".flow__btn-next"),we=ge.find('[name="first_name"]'),$e=ge.find('[name="email"]'),ye=ge.find('[name="phone"]'),Ce=ge.find('[name="gender"]'),ke=ge.find('[name="notes"]'),xe=$(".flow__photo-upload"),je=$(".flow__photo-upload-info"),Ee=xe.find(".flow__photo-form"),Te=xe.find(".flow__doing-magic"),Pe=xe.find(".flow__btn-next"),Oe=$(".flow__form-photo"),Ie=xe.find('[name="front_photo"]'),Ae=xe.find('[name="side_photo"]'),Le=$(".info-message--error-general"),Me=$(".info-message--error-front"),Se=$(".info-message--error-side"),Ne=$(".result"),De=$(".flow__result-info"),Re=$(".info-message--warning-sample");function ze(e){var t=e.attr("name");"front_photo"===t&&(data.frontImage=null),"side_photo"===t&&(data.side_image=null),e.parent().find(".flow__photo-placeholder").addClass("active"),e.parent().find(".flow__photo-preview").removeClass("active").find("img").attr("src","#"),e.val("")}function qe(){return Promise.resolve().then(function(e){return $(".flow").hasClass("flow--3d")?($(".body-model__download-btn").attr("href",data.volume_params.body_model).addClass("active"),L(data.volume_params.body_model)):new Promise(function(e){setTimeout(e,3e3)})}).then(function(e){return te(),ae(),xe.removeClass("active"),je.removeClass("active"),ve.eq(1).removeClass("flow-steps__step--this flow-steps__step--error").addClass("flow-steps__step--completed"),Ne.addClass("active"),De.addClass("active"),ve.eq(2).addClass("flow-steps__step--completed"),$(".flow").hasClass("flow--3d")?(S(),R(),M(e)):Promise.resolve()})}function Ye(e){$(".measurement__img").each(function(){var t=$(this).attr("data-".concat(e,"-src"));$(this).attr("src",t)})}$(document).ready(function(){var e=!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)));function t(){var e=we.val();return e.length>40?(we.closest(".flow__form-label").find(".flow__form-label-error").text("Ensure this field has no more than 40 characters").show(),we.addClass("error"),!1):" "===e.charAt(0)||" "===e.charAt(e.length-1)?(we.closest(".flow__form-label").find(".flow__form-label-error").text("Don't use whitespaces at the start/end of unique name").show(),we.addClass("error"),!1):(we.removeClass("error"),we.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0)}function a(){var e=$e.val();return" "===e.charAt(0)||" "===e.charAt(e.length-1)?($e.closest(".flow__form-label").find(".flow__form-label-error").text("Don't use whitespaces at the start/end of email").show(),$e.addClass("error"),!1):e&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?($e.closest(".flow__form-label").find(".flow__form-label-error").text("Invalid email").show(),$e.addClass("error"),!1):e.length>254?($e.closest(".flow__form-label").find(".flow__form-label-error").text("Ensure this field has no more than 254 characters").show(),$e.addClass("error"),!1):($e.removeClass("error"),$e.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0)}we.on("input",function(){$(this).val().length>40?(we.closest(".flow__form-label").find(".flow__form-label-error").show(),we.closest(".flow__form-label").find(".flow__form-label-error").text("Ensure this field has no more than 40 characters"),we.addClass("error")):"Ensure this field has no more than 40 characters"===we.closest(".flow__form-label").find(".flow__form-label-error").text()&&(we.removeClass("error"),we.closest(".flow__form-label").find(".flow__form-label-error").hide())}),we.on("change",t),$e.on("change",a),ye.intlTelInput({separateDialCode:!0}),ge.find(".switcher__button").on("click",function(){$(".height-input input").hasClass("error")&&h(),$(".weight-input input").hasClass("error")&&g()});var o=$(".height-input"),c=o.find('[name="height-cm"]'),m=o.find('[name="height-in"]'),u=o.find('[name="height-ft"]');function h(){return c.val()<150?("cm"===data.unit?o.closest(".flow__form-label").find(".flow__form-label-error").text("Minimum height is 150cm").show():o.closest(".flow__form-label").find(".flow__form-label-error").text("Minimum height is 4' and 11''").show(),c.addClass("error"),u.addClass("error"),m.addClass("error"),!1):c.val()>220?("cm"===data.unit?o.closest(".flow__form-label").find(".flow__form-label-error").text("Maximum height is 220cm").show():o.closest(".flow__form-label").find(".flow__form-label-error").text("Maximum height is 7' and 2''").show(),c.addClass("error"),u.addClass("error"),m.addClass("error"),!1):+m.val()>12&&"in"===data.unit?(o.closest(".flow__form-label").find(".flow__form-label-error").text("Max value is 12 inches").show(),c.removeClass("error"),u.removeClass("error"),m.addClass("error"),!1):(c.removeClass("error"),u.removeClass("error"),m.removeClass("error"),o.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0)}c.on("change",function(){var e=r($(this).val());u.val(e.ft),m.val(e.in),h()}),u.on("change",function(){var e=n(u.val(),m.val());c.val(e.toFixed(0)),h()}),m.on("change",function(){var e=n(u.val(),m.val());c.val(e.toFixed(0)),h()}),$(".onlyNumeric").on("keypress change input propertychange",function(e){var t=(e=e||$root.event).which||e.keyCode;t>31&&(t<48||t>57)&&e.preventDefault();var a,o=$(this);return o.val()&&(a=o.val(),isNaN(parseFloat(a))||!isFinite(a))&&o.val(""),!0}),$(".onlyNumericFloat").on("keypress change input propertychange",function(){this.value=this.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1")}),$(".noZeroAtStart").on("keypress change input propertychange",function(){this.value=this.value.replace(/^0{1,}/g,"")});var p=$(".weight-input"),f=p.find('[name="weight-lb"]'),v=p.find('[name="weight-kg"]');function g(){var e=v.val(),t=f.val();if("in"===data.unit){if(t<66)return p.closest(".flow__form-label").find(".flow__form-label-error").text("Minimum weight is 66Lb").show(),v.addClass("error"),f.addClass("error"),!1;if(t>441)return p.closest(".flow__form-label").find(".flow__form-label-error").text("Maximum weight is 441Lb").show(),v.addClass("error"),f.addClass("error"),!1}else{if(e<30)return p.closest(".flow__form-label").find(".flow__form-label-error").text("Minimum weight is 30kg").show(),v.addClass("error"),f.addClass("error"),!1;if(e>200)return p.closest(".flow__form-label").find(".flow__form-label-error").text("Maximum weight is 200kg").show(),v.addClass("error"),f.addClass("error"),!1}return v.removeClass("error"),f.removeClass("error"),p.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0}function _(){return ke.val()&&ke.val().length>500?(ke.closest(".flow__form-label").find(".flow__form-label-error").text("Ensure this field has no more than 500 characters").show(),ke.addClass("error"),!1):ke.val()&&!ke.val().replace(/\s/g,"").length?(ke.closest(".flow__form-label").find(".flow__form-label-error").text("This field can't contain only spaces").show(),ke.addClass("error"),!1):(ke.removeClass("error"),ke.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0)}function b(){var e={status:"created",firstName:data.firstName,height:data.height,weight:data.weight,units:data.unit,gender:data.gender,source:"dashboard"};return data.email&&(e.email=data.email),data.phone&&(e.phoneNumber=data.phone),data.notes&&(e.notes=data.notes),e}f.on("change",function(){f.removeClass("error"),p.closest(".flow__form-label").find(".flow__form-label-error").hide(),v.val((this.value/2.2).toFixed(0)),g()}),v.on("change",function(){v.removeClass("error"),p.closest(".flow__form-label").find(".flow__form-label-error").hide(),f.val(s(this.value)),g()}),$(".flow__gender-item").on("click",function(e){"disabled"!==Ce.attr("disabled")?(Ce.closest(".flow__form-gender").removeClass("error"),Ce.closest(".flow__form-label").find(".flow__form-label-error").hide(),$(this).hasClass("active")||($(this).closest(".flow__form-gender").find(".flow__gender-item").removeClass("active"),$(this).addClass("active"),E&&(ze($('input[type="file"][name="front_photo"]')),ze($('input[type="file"][name="side_photo"]')),E=!1))):e.preventDefault()}),ke.on("input",function(){$(this).val().length>500?(ke.closest(".flow__form-label").find(".flow__form-label-error").show(),ke.closest(".flow__form-label").find(".flow__form-label-error").text("Ensure this field has no more than 500 characters"),ke.addClass("error")):"Ensure this field has no more than 500 characters"===ke.closest(".flow__form-label").find(".flow__form-label-error").text()&&(ke.removeClass("error"),ke.closest(".flow__form-label").find(".flow__form-label-error").hide())}),ke.on("change",_),be.on("click",function(){var r=this;data.firstName=we.val(),data.email=$e.val(),data.phone=ye.val()?$(".iti__selected-dial-code").text()+ye.val():null,data.height=c.val(),data.gender=Ce.filter("input:checked").val(),data.notes=ke.val(),data.weight=v.val(),data.isValidated=!0,function(){var e={firstName:!0,email:!0,height:!0,weight:!0,gender:!0,notes:!0};if(e.firstName=(data.firstName?(we.removeClass("error"),we.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0):(we.closest(".flow__form-label").find(".flow__form-label-error").text("This field is required").show(),we.addClass("error"),!1))&&t(),e.email=a(),e.height=(c.val()?(c.removeClass("error"),u.removeClass("error"),m.removeClass("error"),o.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0):(o.closest(".flow__form-label").find(".flow__form-label-error").text("This field is required").show(),c.addClass("error"),u.addClass("error"),m.addClass("error"),!1))&&h(),e.weight=(data.weight?(v.removeClass("error"),f.removeClass("error"),p.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0):(p.closest(".flow__form-label").find(".flow__form-label-error").text("This field is required").show(),v.addClass("error"),f.addClass("error"),!1))&&g(),e.gender=data.gender?(Ce.closest(".flow__form-gender").removeClass("error"),Ce.closest(".flow__form-label").find(".flow__form-label-error").hide(),!0):(Ce.closest(".flow__form-label").find(".flow__form-label-error").text("This field is required").show(),Ce.closest(".flow__form-gender").addClass("error"),!1),e.notes=_(),e.firstName&&e.email&&e.height&&e.weight&&e.gender&&e.notes)return!0;return!1}()?($(this).addClass("button--processing"),Promise.resolve().then(function(){if(e)$(".flow__qrcode-block, .flow__upload-methods-separ").hide();else{var t;if(!de||!de.flowId)return de=new G(apiKey),t=b(),de.create(t);if(!data.personId){var a=b();if(a!=t)return t=a,de.updateState(t).then(function(){})}}}).then(function(e){if(e){de.setFlowId(e);var t="".concat(widgetUrl,"?key=").concat(apiKey,"#/mobile/").concat(e);return de.shortenLink(t)}}).then(function(e){e&&(function(e){t=e,t&&j.a.toDataURL(t,{width:140,margin:0}).then(function(e){$(".qrcode__img img").attr("src",e)}).catch(function(e){return console.log(e)}),w.attr("data-clipboard-text",e);var t}(e),$(".flow__qrcode-block").show(),isAccuracyUser||$(".flow__upload-methods-separ").show(),$("body").addClass("pace-hidden"),function(){var e="";ce=setInterval(function(){de.get().then(function(t){if("opened-on-mobile"===t.state.status&&t.state.lastActiveDate){var a=T()(),o=new Date(t.state.lastActiveDate),r=T.a.duration(a.diff(o)).asSeconds();if(r>7)return Ee.removeClass("hidden"),Te.addClass("hidden"),$(".flow__doing-magic h3").show(),fe.stopSimpleLoader(),void(e="")}if(e!==t.state.status)if(e=t.state.status,"opened-on-mobile"===t.state.status)ve.eq(1).removeClass("flow-steps__step--error"),Ee.addClass("hidden"),Te.removeClass("hidden"),Me.removeClass("active"),Se.removeClass("active"),Le.removeClass("active"),Re.removeClass("active"),$(".flow__doing-magic h3").hide(),fe.startSimpleLoader(),fe.setStatus("Please take photos on your mobile"),Ye(data.gender);else if("closed-on-mobile"===t.state.status)Ee.removeClass("hidden"),Te.addClass("hidden"),$(".flow__doing-magic h3").show(),fe.stopSimpleLoader();else if("finished"===t.state.status)return clearInterval(ce),data.personId=t.person,data.id=t.state.mtmClientId,data.front_params=t.state.measurements.front_params,data.side_params=t.state.measurements.side_params,data.volume_params=t.state.measurements.volume_params,qe().then(function(){Ee.removeClass("hidden"),Te.addClass("hidden"),$(".flow__doing-magic h3").show(),fe.stopSimpleLoader()})}).catch(function(e){console.log(e)})},3e3)}())}).finally(function(){ve.eq(0).removeClass("flow-steps__step--this flow-steps__step--error").addClass("flow-steps__step--completed"),ge.removeClass("active"),_e.removeClass("active"),$(r).removeClass("button--processing"),ve.eq(1).addClass("flow-steps__step--this"),xe.addClass("active"),je.addClass("active"),"true"===P.attr("data-show")&&P.modal("show")}).catch(function(e){console.log(e),de&&de.flowId||isAccuracyUser||$(".flow__qrcode-block, .flow__upload-methods-separ").hide()})):ve.eq(0).addClass("flow-steps__step--error")}),isAccuracyUser&&(e?$(".flow__photo-form h3").css("font-size","13px"):$(".flow__upload-methods-separ, .flow__photos, .flow__photo-upload .flow__btn-next").hide());var w=xe.find(".qrcode__btn");function y(e,t){var a=e.attr("name");if("front_photo"===a&&"image/png"!=t[0].type&&"image/jpeg"!=t[0].type&&"image/jpg"!=t[0].type)return e.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"),Me.find(".info-message__header h5").text("This file is not an image"),Me.find(".info-message__content p").text("Upload a valid image. The file you uploaded was either not an image or a corrupted image."),void Me.addClass("active");if("front_photo"===a&&t&&t[0]){var o=+t[0].size/1024;if(o<30||o>10240)return e.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"),Me.find(".info-message__header h5").text("This image has unacceptable size"),Me.find(".info-message__content p").text("Size of image should be between 30Kb and 10Mb."),void Me.addClass("active");e.parent().removeClass("flow__form-photo--error"),Me.removeClass("active"),data.frontImage=t[0]}if("side_photo"===a&&t&&t[0]){var r=+t[0].size/1024;if("front_photo"===a&&"image/png"!=t[0].type&&"image/jpeg"!=t[0].type&&"image/jpg"!=t[0].type)return e.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"),Me.find(".info-message__header h5").text("This file is not an image"),Me.find(".info-message__content p").text("Upload a valid image. The file you uploaded was either not an image or a corrupted image."),void Me.addClass("active");if(r<30||r>10240)return e.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"),Se.find(".info-message__header h5").text("This image has unacceptable size"),Se.find(".info-message__content p").text("Size of image should be between 30Kb and 10Mb."),void Se.addClass("active");e.parent().removeClass("flow__form-photo--error"),Se.removeClass("active"),data.sideImage=t[0]}(function(e,t,a){if(e&&e[0])return l(e[0]).then(function(t){return d(e[0],t)}).then(function(e){t.attr("src",e),"front_photo"===a&&(data.frontImage=e),"side_photo"===a&&(data.sideImage=e)}).catch(function(e){console.log(e)})})(t,e.parent().find(".flow__photo-preview img"),a).then(function(){e.parent().find(".flow__photo-placeholder").removeClass("active"),e.parent().find(".flow__photo-preview").addClass("active")})}w.on("click",function(){var e=this;i($(this).attr("data-clipboard-text")),$(this).addClass("qrcode__btn--copied").find("span").text("Link copied"),setTimeout(function(){$(e).removeClass("qrcode__btn--copied").find("span").text("Copy link")},3e3)}),Oe.find('input[type="file"]').on("change",function(){$(this).parent().removeClass("flow__form-photo--error"),y($(this),this.files),Re.removeClass("active")}),Oe.on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),Oe.on("dragleave",function(e){e.preventDefault(),e.stopPropagation()}),Oe.on("drop",function(e){e.preventDefault(),e.stopPropagation();var t=e.originalEvent.dataTransfer.files,a=$(this).find('input[type="file"]');a.attr("disabled")||y(a,t)});var C=new ue;Oe.on("click",function(t,a){var o=this;if(e&&(!a||!1!==a.openCamera))return Promise.resolve().then(function(){return C.startStream(),"function"===typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission():(window.ondeviceorientation=C.orientation,null)}).then(function(e){"granted"===e&&(window.ondeviceorientation=C.orientation),"front_photo"===$(o).attr("for")?$(".camera").removeClass("camera--side").addClass("camera--front"):"side_photo"===$(o).attr("for")&&$(".camera").removeClass("camera--front").addClass("camera--side"),$(".camera").removeClass("hidden"),t.preventDefault()}).catch(function(e){console.log(e)})}),$(".camera-gallery").on("click",function(){$(".camera").addClass("hidden"),C.stream&&C.stream.getVideoTracks().length&&C.stream.getVideoTracks()[0].stop(),$(this).closest(".camera").hasClass("camera--front")?Ie.trigger("click",[{openCamera:!1}]):$(this).closest(".camera").hasClass("camera--side")&&Ae.trigger("click",[{openCamera:!1}])}),$(".camera-take-photo").on("click",function(){C.takePhoto(x).then(function(){$(".camera").addClass("hidden"),C.stream&&C.stream.getVideoTracks().length&&C.stream.getVideoTracks()[0].stop()}).catch(function(e){console.log("error: "+e)})}),$(".camera-close").on("click",function(){$(this).closest(".camera").addClass("hidden"),C.stream&&C.stream.getVideoTracks().length&&C.stream.getVideoTracks()[0].stop()});var x=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=d,e.t1=t,e.next=5,l(t);case 5:return e.t2=e.sent,e.next=8,(0,e.t0)(e.t1,e.t2);case 8:a=e.sent,$(".camera").hasClass("camera--front")?(Ie.parent().removeClass("flow__form-photo--error"),Me.removeClass("active"),data.frontImage=a,Ie.parent().find(".flow__photo-placeholder").removeClass("active"),Ie.parent().find(".flow__photo-preview").addClass("active").find("img").attr("src",a)):$(".camera").hasClass("camera--side")&&(Ae.parent().removeClass("flow__form-photo--error"),Se.removeClass("active"),data.sideImage=a,Ae.parent().find(".flow__photo-placeholder").removeClass("active"),Ae.parent().find(".flow__photo-preview").addClass("active").find("img").attr("src",a)),$(".camera").removeClass("camera--front camera--side"),C.stream&&C.stream.getVideoTracks().length&&C.stream.getVideoTracks()[0].stop(),e.next=17;break;case 14:e.prev=14,e.t3=e.catch(0),alert("Error: ".concat(e.t3));case 17:case"end":return e.stop()}},e,this,[[0,14]])}),function(){var t=this,a=arguments;return new Promise(function(o,r){var n=e.apply(t,a);function s(e){pe(n,o,r,s,i,"next",e)}function i(e){pe(n,o,r,s,i,"throw",e)}s(void 0)})});return function(e){return t.apply(this,arguments)}}(),E=!1;$(".flow__samples-btn").on("click",function(){Promise.all([fetch("/static/img/samples/".concat(data.gender,"_front.jpg"),{method:"GET"}),fetch("/static/img/samples/".concat(data.gender,"_side.jpg"),{method:"GET"})]).then(function(e){var t=he(e,2),a=t[0],o=t[1];return Promise.all([a.blob(),o.blob()])}).then(function(e){var t=he(e,2),a=t[0],o=t[1];y(Ie,[a]),y(Ae,[o]),E=!0,Re.addClass("active")}).catch(function(e){console.log(e)})}),$(".flow__samples-btn").popover({placement:"top",trigger:"hover",container:"body",html:!0,animation:!0,content:function(){return $(this).next(".popover").html()},template:'<div class="popover samples">\n    <div class="arrow"></div>\n    <div class="popover-content"></div>\n    </div>'});var P=$("#flow-tutorial-modal"),O=$("#dont-show-tutorial-again");$(".tutorial__btn").on("click",function(){P.modal("show")}),$("#flow-tutorial-modal .tutorial-got-it-btn").on("click",function(){P.modal("hide")}),$("#flow-tutorial-modal").on("hidden.bs.modal",function(){var e,t="true"===P.attr("data-show"),a=!O.prop("checked");t!=a&&(e=a,$.ajax({url:"/user/update/".concat(userID,"/"),method:"POST",data:{first_name:userFirstName,last_name:userLastName,email:userEmail,is_tutorial_shown:e},json:!0,success:function(e){console.log(e)},error:function(e){console.log(e)}}),O.prop("checked",!e),P.attr("data-show",e))}),$(".flow").length&&(le=new k.a({host:"".concat(window.location.origin,"/api/v2/"),key:apiKey})),Pe.on("click",function(){Le.removeClass("active"),!data.frontImage||Ie.parent().hasClass("flow__form-photo--error")?Ie.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"):Ie.parent().removeClass("flow__form-photo--error"),!data.sideImage||Ae.parent().hasClass("flow__form-photo--error")?Ae.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"):Ae.parent().removeClass("flow__form-photo--error"),data.frontImage&&data.sideImage?($('[name="first_name"]').attr("readonly","readonly"),$('[name="email"]').attr("readonly","readonly"),$('[name="phone"]').attr("readonly","readonly"),$('[name="gender"]').attr("disabled","disabled"),$('[name="height-cm"]').attr("readonly","readonly"),$('[name="height-ft"]').attr("readonly","readonly"),$('[name="height-in"]').attr("readonly","readonly"),$('[name="weight-kg"]').attr("disabled","disabled"),$('[name="weight-lb"]').attr("disabled","disabled"),$('[name="notes"]').attr("readonly","readonly"),Ee.addClass("hidden"),Te.removeClass("hidden"),ve.eq(1).removeClass("flow-steps__step--error"),fe.setStatus("Sending data\u2026"),fe.start(),Promise.resolve().then(function(){return data.personId?(e=data.personId,le.person.update(e,{frontImage:data.frontImage,sideImage:data.sideImage}).then(function(e){return le.person.calculate(e.id)})):function(){var e={firstName:data.firstName,unit:data.unit,source:"dashboard"};return data.email&&(e.email=data.email),data.phone&&(e.phone=data.phone),data.notes&&(e.notes=data.notes),le.mtmClient.create(e).then(function(e){data.id=e;var t={height:data.height,gender:data.gender};return data.weight&&(t.weight=data.weight),le.mtmClient.createPerson(e,t)}).then(function(e){return data.personId=e,de&&de.flowId&&de.update({person:e,state:{mtmClientId:data.id}}),Ye(data.gender),le.person.updateAndCalculate(e,{frontImage:data.frontImage,sideImage:data.sideImage})})}();var e}).then(function(e){return fe.setStatus("Generating model\u2026"),le.queue.getResults(e)}).then(function(e){return fe.setStatus("Getting results\u2026"),$(".flow").hasClass("flow--3d")?fe.speedUp(3):fe.speedUp(15),data.front_params=e.front_params,data.side_params=e.side_params,data.volume_params=e.volume_params,ce&&(clearInterval(ce),$("body").removeClass("pace-hidden")),qe()}).finally(function(){Ee.removeClass("hidden"),Te.addClass("hidden"),fe.stop()}).catch(function(e){if(ve.eq(1).addClass("flow-steps__step--error"),console.log(e),e.message,e&&"Network error"===e.message&&(Le.find(".info-message__header h5").text("Oops!"),Le.find(".info-message__content p").text("Internet connection failed. Please, check your internet connection."),Le.addClass("active")),e&&e.response&&e.response.data&&e.response.data.sub_tasks){var t=e.response.data.sub_tasks;(function(e){var t=!1,a=e.filter(function(e){return-1!==e.name.indexOf("front_")})[0],o=e.filter(function(e){return-1!==e.name.indexOf("side_")})[0];if(console.log(a),console.log(o),Oe.addClass("flow__form-photo--success"),a&&"FAILURE"===a.status){var r,n="We couldn\u2019t detect your body",s="Please retake the front photo. Make sure your whole body is present on the screen.";a.message&&("Side photo in the front"===a.message?(n="It seems you uploaded side photo instead of the front one",s="Please upload the front photo."):"Can't detect the human body"===a.message?(n="We can\u2019t detect your body on the front photo",s="Please retake the front photo. Make sure your whole body is present on the photo."):"The body is not full"===a.message?(n="Your full body should be present on the front photo",s="Please retake the front photo. Make sure your whole body is present and the pose is correct."):-1!==a.message.indexOf("The pose is wrong, check: ")&&(r=(r=a.message.replace("The pose is wrong, check: ","")).replace(/_/g," "),n="The pose on the front photo is a bit off, we couldn\u2019t detect your ".concat(r),s="Make sure your ".concat(r," is present on a photo"))),Ie.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"),ze(Ie),Me.find(".info-message__header h5").text(n),Me.find(".info-message__content p").text(s),Me.addClass("active"),ga("send",{hitType:"event",eventCategory:"photo",eventLabel:"front",eventAction:"error"}),t=!0}if(o&&"FAILURE"===o.status){var i,l="We couldn\u2019t detect your body",d="Please retake the side photo. Make sure your whole body is present on the screen.";o.message&&("Front photo in the side"===o.message?(l="It seems you uploaded frong photo instead of the side one",d="Please upload the side photo."):"Can't detect the human body"===o.message?(l="We can\u2019t detect your body on the side photo",d="Please retake the side photo. Make sure your whole body is present on the photo."):"The body is not full"===o.message?(l="Your full body should be present on the side photo",d="Please retake the side photo. Make sure your whole body is present and the pose is correct."):-1!==o.message.indexOf("The pose is wrong, check: ")&&(i=(i=o.message.replace("The pose is wrong, check: ","")).replace(/_/g," "),l="The pose on the side photo is a bit off, we couldn\u2019t detect your ".concat(i),d="Make sure your ".concat(i," is present on a photo"))),Ae.parent().removeClass("flow__form-photo--success").addClass("flow__form-photo--error"),ze(Ae),Se.find(".info-message__header h5").text(l),Se.find(".info-message__content p").text(d),Se.addClass("active"),ga("send",{hitType:"event",eventCategory:"photo",eventLabel:"side",eventAction:"error"}),t=!0}return t})(t)||(Le.find(".info-message__header h5").text("We couldn\u2019t process your photos"),Le.find(".info-message__content p").text("Something went wrong, please try again."),Le.addClass("active"))}else if(e&&e.response&&e.response.data){console.log(e.response.data);var a=e.response.data,o=a.detail,r=a.brand,n=a.body_part;o||r||n?(Le.find(".info-message__header h5").text("An error occured, please try again."),Le.find(".info-message__content p").text(o||r||n),Le.addClass("active")):(Le.find(".info-message__header h5").text("Oops!"),Le.find(".info-message__content p").text("Something was wrong, try again later."),Le.addClass("active"))}else console.log(e),Le.find(".info-message__header h5").text("Oops!"),Le.find(".info-message__content p").text("Something went wrong, please try again."),Le.addClass("active")})):ve.eq(1).addClass("flow-steps__step--error")}),xe.find(".flow__btn-back").on("click",function(){ve.eq(0).removeClass("flow-steps__step--completed").addClass("flow-steps__step--this"),ve.eq(1).removeClass("flow-steps__step--this"),xe.removeClass("active"),je.removeClass("active"),ge.addClass("active"),_e.addClass("active")})});var Fe='<div class="saia-widget-container"></div>\n<script id="saia-mtm-integration" async src="'.concat(window.MTM_WIDGET_URL,'/integration.js" data-public-key="').concat(window.PUBLIC_KEY,'"><\/script>');$(document).ready(function(){$("#integration-script");var e=$('[name="results-screen"]');$(".mtm-widget__code-wrap .mtm-widget__copy-btn").on("click",function(){var e=$(this);i(Fe),$("#integration-script").focus().select(),e.addClass("mtm-widget__copy-btn--copied"),setTimeout(function(){e.removeClass("mtm-widget__copy-btn--copied")},3e3)});var t=$(".mtm-widget__results-preview--thanks"),a=$(".mtm-widget__results-preview--measurements");e.on("change",function(){var e=$('[name="results-screen"]:checked').val();$(".mtm-widget__results-preview").removeClass("active"),"thanks"===e?t.addClass("active"):a.addClass("active"),$.ajax({url:"/api/v2/measurements/mtm-widget/",method:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({mtm_widget:{final_page:e}}),error:function(e){o.error(e.message,"Error!",{positionClass:"toast-top-center"})}})})});a(552);$(document).ready(function(){if($(".history").length){var e=function(e){var t=e.width(),a=e.parent().width(),o=e.parent().scrollLeft();t!==a&&(0!==o?e.addClass("scroll-shadow-left"):e.removeClass("scroll-shadow-left"),o!==t-a?e.addClass("scroll-shadow-right"):e.removeClass("scroll-shadow-right"))},t=$(".preloader");$("[data-mtm-client-url]").on("click",function(e){window.location=$(this).data("mtm-client-url")}),$(".history__del-mtmclient-btn").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("client-id"),a=$(this).data("person-id"),o=$(this).data("client-name");$("#submit_mtmclient_delete").data("client-id",t),$("#submit_mtmclient_delete").data("person-id",a),$("#submit_mtmclient_delete").data("client-name",o),$("#client-name").text(o),$("#mtm_client_delete_modal").modal("show")}),$("#submit_mtmclient_delete").on("click",function(){var e=$(this).data("client-id"),t=$(this).data("person-id");$.ajax({url:"/api/v2/measurements/mtm-clients/"+e+"/",method:"DELETE",success:function(e){console.log(e),$.ajax({url:"/api/v2/persons/"+t+"/",method:"DELETE",success:function(e){console.log(e),window.location.reload()},error:function(e){console.log(e.responseText),$(".error").text(e.responseText)}})},error:function(e){console.log(e.responseText),$("#client-name + .error").text(e.responseText)}})}),$(".history__del-person-btn").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("person-id");$("#submit_person_delete").data("person-id",t),$("#person_delete_modal").modal("show")}),$("#submit_person_delete").on("click",function(){var e=$(this).data("person-id");$.ajax({url:"/api/v2/persons/"+e+"/",method:"DELETE",success:function(e){console.log(e),window.location.reload()},error:function(e){console.log(e.responseText),$(".error").text(e.responseText)}})}),$(".history__table tr td a").on("click",function(e){e.stopPropagation()}),$('.brand-filter select[name="gender"]').on("change",function(){$(this).closest("#show-filters-modal").length||$(".brand-filter form").submit()}),$(".brand-filter-cancel-btn").on("click",function(){$("#search-client").val("").attr("value","").change()}),$("#search-client").on("keypress change input propertychange",function(){$("#search-client").val()?$(".brand-filter-cancel-btn").removeClass("hidden"):$(".brand-filter-cancel-btn").addClass("hidden")}),$(".brand-filter form").on("submit",function(e){e.preventDefault();var t=$(this).serialize();window.location="".concat($(this).attr("action"),"&").concat(t)}),E.updateLocale("en",{week:{dow:1}}),$("#date").on("change",function(e){var t="Y-MM-DD",a="",o="",r=$(this).val();if("today"===r){var n=E();a=n.format(t),o=n.format(t)}if("yesterday"===r){var s=E();s.subtract(1,"day"),a=s.format(t),o=s.format(t)}if("this-week"===r){var i=E(),l=E().startOf("week").toDate();a=E(l).format(t),o=i.format(t)}if("last-week"===r){var d=E().subtract(1,"week").startOf("week").toDate(),c=E().subtract(1,"week").endOf("week").toDate();a=E(d).format(t),o=E(c).format(t)}if("this-month"===r){var m=E().startOf("month").toDate();a=E(m).format(t),o=E().format(t)}if("last-month"===r){var u=E().subtract(1,"month").startOf("month").toDate(),h=E().subtract(1,"month").endOf("month").toDate();a=E(u).format(t),o=E(h).format(t)}if("this-quarter"===r){var p=E().startOf("quarter").toDate();a=E(p).format(t),o=E().format(t)}if("last-quarter"===r){var f=E().subtract(1,"quarter").startOf("quarter").toDate(),v=E().subtract(1,"quarter").endOf("quarter").toDate();a=E(f).format(t),o=E(v).format(t)}console.log("createdAfter "+a),console.log("createdBefore "+o),$('[name="created_after"]').val(a),$('[name="created_before"]').val(o),$(this).closest("#show-filters-modal").length||$(".brand-filter form").submit()}),$("#convert-units").on("change",function(){var e=!!$("convert-units option:selected");$(".convert-units__btn").attr("disabled",!e)}),$(".convert-units__btn").on("click",function(){var e=$("#convert-units").val();t.addClass("preloader-show"),$("#show-filters-modal").modal("hide");var a=$(".history__table-wrapper").attr("data-source"),r="dashboard"===a||"web-widget"===a?"/measurements/client/unit/bulk-update/".concat(a,"/"):"/measurements/client/unit/bulk-update/";$.ajax({url:r,method:"POST",data:{unit:e},success:function(e){window.location.reload()},error:function(e){o.error(e.message,"Error!",{positionClass:"toast-top-center"}),t.removeClass("preloader-show")}})}),$(".history__table tr .checkbox").on("click",function(e){e.stopPropagation()}),$(".history__table th .checkbox").on("click",function(e){var t=$(this).children("input").is(":checked");$(".history__table tr:not(.failed-measurements):not([data-pending]) td .checkbox input").prop("checked",t),$(".history__table tr:not(.failed-measurements):not([data-pending]) td .checkbox input").closest("tr").toggleClass("tr-checked",t),$(".download-measurements").removeAttr("disabled"),t||($(this).removeClass("checkbox--indeterminate"),$(".download-measurements").attr("disabled","disabled"))});var a=$(".history__table tr:not(.failed-measurements):not([data-pending]) td .checkbox");$(".history__table tr.failed-measurements td .checkbox").on("click",function(e){e.preventDefault()}),$(".history__table tr[data-pending] td .checkbox").on("click",function(e){e.preventDefault()}),a.on("click",function(e){var t=$(this).children("input").is(":checked");$(this).closest("tr").toggleClass("tr-checked",t);var o=$(".history__table td .checkbox input:checked");$(".download-measurements").removeAttr("disabled"),o.length===a.length?($("#check-all").closest(".checkbox").removeClass("checkbox--indeterminate"),$("#check-all").prop("checked",!0)):0===o.length?($("#check-all").closest(".checkbox").removeClass("checkbox--indeterminate"),$("#check-all").prop("checked",!1),$(".download-measurements").attr("disabled","disabled")):($("#check-all").closest(".checkbox").addClass("checkbox--indeterminate"),$("#check-all").prop("checked",!1))}),$(".history__table tr .checkbox").on("change",function(){var e=$(".history__table tr td .checkbox input:checked").length;$(".history__items-selected-number").text(e),$(".history__items-selected p").contents().last()[0].textContent=1===e?" item selected":" items selected",0==e?$(".history__download-block-wrapper").removeClass("active"):$(".history__download-block-wrapper").addClass("active")}),$(".download-measurements").on("click",function(){var e="/api/v2/measurements/mtm-clients/export1/?id__in="+$(".history__table td .checkbox input:checked").toArray().map(function(e){return $(e).data("id")}).join(","),t=document.createElement("a");document.body.appendChild(t),t.setAttribute("style","display: none"),t.href=e,t.download="export.csv",t.click(),t.remove()}),$(".discard-checked-items").on("click",function(){$(".history__table tr td .checkbox input").prop("checked",!1).change(),$(".history__table tr td .checkbox input").closest("tr").removeClass("tr-checked"),$("#check-all").prop("checked",!1).parent().removeClass("checkbox--indeterminate")});var r=$("#range-date").daterangepicker({startDate:DATE_RANGE_START||E(),endDate:DATE_RANGE_END||E(),maxDate:E(),ranges:{Yesterday:[E().subtract(1,"days"),E().subtract(1,"days")],"This week":[E().startOf("week"),E()],"Last week":[E().subtract(1,"week").startOf("week"),E().subtract(1,"week").endOf("week")],"This month":[E().startOf("month"),E().endOf("month")],"Last month":[E().subtract(1,"month").startOf("month"),E().subtract(1,"month").endOf("month")],"This quarter":[E().startOf("quarter"),E()],"Last quarter":[E().subtract(1,"quarter").startOf("quarter"),E().subtract(1,"quarter").endOf("quarter")]},locale:{format:"YYYY-MM-DD",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]},buttonClasses:"button",applyButtonClasses:"button",cancelButtonClasses:"button--outline"},function(e,t,a){var o=E(e).format("Y-MM-DD"),r=E(t).format("Y-MM-DD");$('[name="created_after"]').val("Invalid date"!==o?o:"").attr("value","Invalid date"!==o?o:""),$('[name="created_before"]').val("Invalid date"!==r?r:"").attr("value","Invalid date"!==r?r:"");var n=a.toLowerCase().trim().replace(" ","_");$('[name="range_type"]').val(n).attr("value",n),RANGE_TYPE=n,$(".date-range-filter").closest("#show-filters-modal").length||$(".brand-filter form").submit()});$(".date-range-filter").on("click",function(){r.data("daterangepicker").move(),$(".daterangepicker__custom-item").hasClass("active")&&$(".ranges ul li").removeClass("active")}),$("#range-date").on("apply.daterangepicker",function(e,t){if("Custom Range"===t.chosenLabel){var a=t.startDate.format("MM/DD/YYYY"),o=t.endDate.format("MM/DD/YYYY");$("#range-date > span").text("".concat(a," - ").concat(o))}}),$(".daterangepicker .ranges li").on("click",function(){var e=$(this).text();RANGE_TYPE=e.toLowerCase().trim().replace(" ","_"),"Custom Range"!==e&&$("#range-date > span").text(e),$(".daterangepicker .ranges li").removeClass("active"),$("[data-range-type]").removeClass("active"),$(this).addClass("active")}),$(".daterangepicker .ranges").prepend('\n    <div class="daterangepicker__custom-item daterangepicker__custom-item--all" data-range-type="all_time">All time</div>\n    <div class="daterangepicker__custom-item daterangepicker__custom-item--today" data-range-type="today">Today</div>\n    '),$(".daterangepicker__custom-item--all").on("click",function(){$('[name="created_after"]').val(""),$('[name="created_before"]').val("")}),$(".daterangepicker__custom-item--today").on("click",function(){var e=E().format("Y-MM-DD"),t=E().format("Y-MM-DD");$('[name="created_after"]').val(e),$('[name="created_before"]').val(t)}),$(".daterangepicker__custom-item").on("click",function(){RANGE_TYPE=$(this).text().toLowerCase().trim().replace(" ","_"),$('[name="range_type"]').val($(this).data("range-type"));var e=$(this).text();$("#range-date > span").text(e),$(".daterangepicker").css("display","none").find(".ranges li").removeClass("active"),$("[data-range-type]").removeClass("active"),$(this).addClass("active"),r.data("daterangepicker").chosenLabel=$(this).text(),$(".date-range-filter").closest("#show-filters-modal").length||$(".brand-filter form").submit()}),$("#range-date").on("show.daterangepicker",function(){"undefined"!==typeof RANGE_TYPE&&("all_time"!==RANGE_TYPE&&"today"!==RANGE_TYPE||($(".daterangepicker .ranges li").removeClass("active"),$(".daterangepicker").removeClass("show-calendar"),$('[data-range-type="'.concat(RANGE_TYPE,'"]')).addClass("active")),"yesterday"===RANGE_TYPE?$("#range-date > span").text("Yesterday"):"this_week"===RANGE_TYPE?$("#range-date > span").text("This week"):"last_week"===RANGE_TYPE?$("#range-date > span").text("Last week"):"this_month"===RANGE_TYPE?$("#range-date > span").text("This month"):"last_month"===RANGE_TYPE?$("#range-date > span").text("Last month"):"this_quarter"===RANGE_TYPE?$("#range-date > span").text("This quarter"):"last_quarter"===RANGE_TYPE?$("#range-date > span").text("Last quarter"):"all_time"===RANGE_TYPE?$("#range-date > span").text("All time"):"today"===RANGE_TYPE&&$("#range-date > span").text("Today"))}),"undefined"!==typeof RANGE_TYPE&&("yesterday"===RANGE_TYPE?$("#range-date > span").text("Yesterday"):"this_week"===RANGE_TYPE?$("#range-date > span").text("This week"):"last_week"===RANGE_TYPE?$("#range-date > span").text("Last week"):"this_month"===RANGE_TYPE?$("#range-date > span").text("This month"):"last_month"===RANGE_TYPE?$("#range-date > span").text("Last month"):"this_quarter"===RANGE_TYPE?$("#range-date > span").text("This quarter"):"last_quarter"===RANGE_TYPE?$("#range-date > span").text("Last quarter"):"all_time"===RANGE_TYPE?$("#range-date > span").text("All time"):"today"===RANGE_TYPE?$("#range-date > span").text("Today"):"custom_range"===RANGE_TYPE&&$("#range-date > span").text("Custom range")),$(".daterangepicker .drp-buttons").prepend('\n    <p class="daterangepicker__note">Please choose Start and End date </p>\n    '),$(".unlock-download-measurements").popover({placement:"top",trigger:"hover",html:!0,animation:!0,template:'<div class="popover history__popover">\n        <div class="arrow"></div>\n        <div class="popover-content">\n        </div>\n      </div>',content:'<div class="popover__desc"><p>Please upgrade to unlock this feature</p></div>'}),$('[data-pending="true"] .status--api-pending').popover({html:!0,placement:function(e,t){var a=$(t)[0].getBoundingClientRect();return $(window).height()-a.bottom<350?"top":"bottom"},trigger:"manual",animation:!0,container:"body",template:'<div class="popover history__popover">\n      <div class="arrow"></div>\n      <div class="popover-content"></div>\n      </div>',content:'<h5 class="popover__title">Pending</h5>\n      <div class="popover__desc">\n        <p class="status-tooltip">This model was created though API and doesn\u2019t contain any photos. Please <a href="https://saia.3dlook.me/docs/3d.html#update-a-specific-3d-person" target="_blank">update this model</a> by uploading photos.</p>\n      </div>'}).on("mouseenter",function(){var e=this;$(this).popover("show"),$(".popover").on("mouseleave",function(){$(e).popover("hide")})}).on("mouseleave",function(){$(".popover:hover").length||$(this).popover("hide")});var n=$(".history__show-filters-btn"),s=$(".history__filter-block"),i=$("#show-filters-modal");n.on("click",function(){i.find(".modal-filters").html(s),i.modal("show")}),$("#show-filters-modal .apply-filters-btn").on("click",function(){$(".brand-filter form").submit(),$("#show-filters-modal").modal("hide"),t.addClass("preloader-show")}),e($(".history__table")),$(".history__table-wrapper").scroll(function(){e($(".history__table"))})}}),a(283)}});